{"ast":null,"code":"import * as e from \"@onflow/sdk\";\nimport { config as t, account as r, send as n, getTransactionStatus as o, decode as a, resolve as i, createSignableVoucher as s, pipe as c, interaction as u, latestBlock as d, encodeMessageFromSignable as l } from \"@onflow/sdk\";\nexport { TestUtils, account, arg, args, atBlockHeight, atBlockId, authorization, authorizations, build, config, createSignableVoucher, decode, getAccount, getBlock, getBlockByHeight, getBlockById, getBlockHeader, getCollection, getEvents, getEventsAtBlockHeightRange, getEventsAtBlockIds, getLatestBlock, getTransaction, getTransactionStatus, invariant, isBad, isOk, latestBlock, limit, param, params, payer, ping, pipe, proposer, ref, script, send, transaction, validator, why } from \"@onflow/sdk\";\nimport { invariant as f } from \"@onflow/util-invariant\";\nimport * as p from \"@onflow/types\";\nimport { INIT as h, SUBSCRIBE as v, UNSUBSCRIBE as m, spawn as y, send as E, UPDATED as g, SNAPSHOT as P, subscriber as C, snapshoter as R } from \"@onflow/util-actor\";\nimport { withPrefix as S, sansPrefix as w } from \"@onflow/util-address\";\nexport { display, sansPrefix, withPrefix } from \"@onflow/util-address\";\nimport * as L from \"@onflow/rlp\";\nimport { uid as b } from \"@onflow/util-uid\";\nexport { template as cadence, template as cdc } from \"@onflow/util-template\";\n\nvar A = function (e) {\n  try {\n    return Promise.resolve(t().where(e)).then(function (t) {\n      return Object.fromEntries(Object.entries(t).map(function (t) {\n        var r = t[1];\n        return [t[0].replace(e, \"\"), r];\n      }));\n    });\n  } catch (e) {\n    return Promise.reject(e);\n  }\n};\n\nt({\n  \"discovery.wallet.method.default\": \"IFRAME/RPC\",\n  \"fcl.storage.default\": {\n    can: !0,\n    get: function (e) {\n      try {\n        return Promise.resolve(JSON.parse(sessionStorage.getItem(e)));\n      } catch (e) {\n        return Promise.reject(e);\n      }\n    },\n    put: function (e, t) {\n      try {\n        return Promise.resolve(sessionStorage.setItem(e, JSON.stringify(t)));\n      } catch (e) {\n        return Promise.reject(e);\n      }\n    }\n  }\n});\n\nvar I = \"0.0.77\",\n    F = function (e) {\n  return function (t) {\n    return typeof t === e;\n  };\n},\n    O = function (e) {\n  return null != e;\n},\n    N = F(\"object\"),\n    D = F(\"string\"),\n    k = F(\"function\"),\n    j = F(\"number\");\n\nfunction T(t) {\n  return k(t) ? t(e.arg, p) : [];\n}\n\nvar _ = function (t) {\n  void 0 === t && (t = {});\n\n  try {\n    return Promise.resolve(function (t) {\n      try {\n        return f(O(t.cadence), \"query({ cadence }) -- cadence is required\"), f(D(t.cadence), \"query({ cadence }) -- cadence must be a string\"), Promise.resolve(e.config.get(\"accessNode.api\")).then(function (e) {\n          f(e, 'Required value for \"accessNode.api\" not defined in config. See: https://github.com/onflow/flow-js-sdk/blob/master/packages/fcl/src/exec/query.md#configuration');\n        });\n      } catch (e) {\n        return Promise.reject(e);\n      }\n    }(t)).then(function () {\n      return e.send([e.script(t.cadence), e.args(T(t.args || [])), t.limit && \"number\" == typeof t.limit && e.limit(t.limit)]).then(e.decode);\n    });\n  } catch (e) {\n    return Promise.reject(e);\n  }\n};\n\nfunction V() {\n  return (V = Object.assign || function (e) {\n    for (var t = 1; t < arguments.length; t++) {\n      var r = arguments[t];\n\n      for (var n in r) Object.prototype.hasOwnProperty.call(r, n) && (e[n] = r[n]);\n    }\n\n    return e;\n  }).apply(this, arguments);\n}\n\nfunction x(e, t) {\n  (null == t || t > e.length) && (t = e.length);\n\n  for (var r = 0, n = new Array(t); r < t; r++) n[r] = e[r];\n\n  return n;\n}\n\nfunction M(e, t) {\n  var r = \"undefined\" != typeof Symbol && e[Symbol.iterator] || e[\"@@iterator\"];\n  if (r) return (r = r.call(e)).next.bind(r);\n\n  if (Array.isArray(e) || (r = function (e, t) {\n    if (e) {\n      if (\"string\" == typeof e) return x(e, t);\n      var r = Object.prototype.toString.call(e).slice(8, -1);\n      return \"Object\" === r && e.constructor && (r = e.constructor.name), \"Map\" === r || \"Set\" === r ? Array.from(e) : \"Arguments\" === r || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r) ? x(e, t) : void 0;\n    }\n  }(e)) || t && e && \"number\" == typeof e.length) {\n    r && (e = r);\n    var n = 0;\n    return function () {\n      return n >= e.length ? {\n        done: !0\n      } : {\n        done: !1,\n        value: e[n++]\n      };\n    };\n  }\n\n  throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nvar W = {\n  f_type: \"Service\",\n  f_vsn: \"1.0.0\"\n},\n    U = {\n  f_type: \"Identity\",\n  f_vsn: \"1.0.0\"\n},\n    z = {\n  f_type: \"USER\",\n  f_vsn: \"1.0.0\"\n},\n    H = {\n  f_type: \"PollingResponse\",\n  f_vsn: \"1.0.0\"\n},\n    Y = {\n  f_type: \"CompositeSignature\",\n  f_vsn: \"1.0.0\"\n};\n\nfunction B(e) {\n  if (null == e) return null;\n\n  switch (e.f_vsn) {\n    case \"1.0.0\":\n      return e;\n\n    default:\n      return V({\n        old: e\n      }, W, {\n        type: \"frame\",\n        endpoint: e.endpoint,\n        params: e.params || {},\n        data: e.data || {}\n      });\n  }\n}\n\nfunction J(e) {\n  if (null == e) return null;\n\n  switch (e.f_vsn) {\n    case \"1.0.0\":\n      return e;\n\n    default:\n      return V({}, W, {\n        type: \"back-channel-rpc\",\n        endpoint: e.endpoint,\n        method: e.method,\n        params: e.params || {},\n        data: e.data || {}\n      });\n  }\n}\n\nfunction q(e) {\n  if (null == e) return null;\n\n  switch (null == e.method && (e = V({}, e, {\n    type: \"local-view\",\n    method: \"VIEW/IFRAME\"\n  })), e.f_vsn) {\n    case \"1.0.0\":\n      return e;\n\n    default:\n      return V({}, W, {\n        type: e.type || \"local-view\",\n        method: e.method,\n        endpoint: e.endpoint,\n        data: e.data || {},\n        params: e.params || {}\n      });\n  }\n}\n\nvar K = {\n  \"back-channel-rpc\": J,\n  \"pre-authz\": function (e) {\n    if (null == e) return null;\n\n    switch (e.f_vsn) {\n      case \"1.0.0\":\n        return e;\n\n      default:\n        return V({}, W, {\n          type: e.type,\n          uid: e.id,\n          endpoint: e.endpoint,\n          method: e.method,\n          identity: V({}, U, {\n            address: S(e.addr),\n            keyId: e.keyId\n          }),\n          params: e.params,\n          data: e.data\n        });\n    }\n  },\n  authz: function (e) {\n    if (null == e) return null;\n\n    switch (e.f_vsn) {\n      case \"1.0.0\":\n        return e;\n\n      default:\n        return V({}, W, {\n          type: e.type,\n          uid: e.id,\n          endpoint: e.endpoint,\n          method: e.method,\n          identity: V({}, U, {\n            address: S(e.addr),\n            keyId: e.keyId\n          }),\n          params: e.params,\n          data: e.data\n        });\n    }\n  },\n  authn: function (e) {\n    if (null == e) return null;\n\n    switch (e.f_vsn) {\n      case \"1.0.0\":\n        return e;\n\n      default:\n        return V({}, W, {\n          type: e.type,\n          uid: e.id,\n          endpoint: e.authn,\n          id: e.pid,\n          provider: {\n            address: S(e.addr),\n            name: e.name,\n            icon: e.icon\n          }\n        });\n    }\n  },\n  frame: B,\n  \"open-id\": function (e) {\n    if (null == e) return null;\n\n    switch (e.f_vsn) {\n      case \"1.0.0\":\n        return e;\n\n      default:\n        return null;\n    }\n  },\n  \"user-signature\": function (e) {\n    if (null == e) return null;\n\n    switch (e.f_vsn) {\n      case \"1.0.0\":\n        return e;\n\n      default:\n        throw new Error(\"Invalid user-signature service\");\n    }\n  },\n  \"local-view\": q\n};\n\nfunction G(e) {\n  return L.encode([e.provider.address || e.provider.name || \"UNSPECIFIED\", e.id]).toString(\"hex\");\n}\n\nfunction Z(e, t) {\n  return void 0 === e && (e = []), e.find(function (e) {\n    return e.type === t;\n  });\n}\n\nfunction $(e) {\n  var t = new URL(e.endpoint);\n  if (t.searchParams.append(\"l6n\", window.location.origin), null != e.params) for (var r = 0, n = Object.entries(e.params || {}); r < n.length; r++) {\n    var o = n[r];\n    t.searchParams.append(o[0], o[1]);\n  }\n  return t;\n}\n\nfunction X(e, t) {\n  void 0 === t && (t = {});\n  var r = t.method || \"POST\",\n      n = \"GET\" === r ? void 0 : JSON.stringify(t.data || e.data || {});\n  return fetch($(e), {\n    method: r,\n    headers: V({}, e.headers || {}, t.headers || {}, {\n      \"Content-Type\": \"application/json\"\n    }),\n    body: n\n  }).then(function (e) {\n    return e.json();\n  });\n}\n\nfunction Q(e) {\n  var t;\n  if (null == e) return null;\n\n  switch ((e.addr || e.services) && (e = {\n    status: \"APPROVED\",\n    data: V({}, e)\n  }), e.f_vsn) {\n    case \"1.0.0\":\n      return e;\n\n    default:\n      return V({}, H, {\n        status: e.status,\n        reason: null != (t = e.reason) ? t : null,\n        data: e.compositeSignature || e.data || {},\n        updates: J(e.authorizationUpdates),\n        local: B((e.local || [])[0])\n      });\n  }\n}\n\nvar ee = function e(t, r) {\n  void 0 === r && (r = function () {\n    return !0;\n  });\n\n  try {\n    if (f(t, \"Missing Polling Service\", {\n      service: t\n    }), !r()) throw new Error(\"Externally Halted\");\n    return Promise.resolve(X(t, {\n      method: re(t)\n    }).then(Q)).then(function (t) {\n      switch (t.status) {\n        case \"APPROVED\":\n          return t.data;\n\n        case \"DECLINED\":\n          throw new Error(\"Declined: \" + (t.reason || \"No reason supplied.\"));\n\n        default:\n          return Promise.resolve(new Promise(function (e) {\n            return setTimeout(e, 500);\n          })).then(function () {\n            return e(t.updates, r);\n          });\n      }\n    });\n  } catch (e) {\n    return Promise.reject(e);\n  }\n},\n    te = {\n  \"HTTP/GET\": \"GET\",\n  \"HTTP/POST\": \"POST\"\n},\n    re = function (e) {\n  return f(te[e.method], \"Invalid Service Method for type back-channel-rpc\", {\n    service: e\n  }), te[e.method];\n},\n    ne = \"FCL_IFRAME\";\n\nfunction oe(e) {\n  f(!document.getElementById(ne), \"Attempt at triggering multiple Frames\", {\n    src: e\n  });\n  var t = document.createElement(\"iframe\");\n  return t.src = e, t.id = ne, t.allow = \"usb *; hid *\", t.frameBorder = \"0\", t.style.cssText = \"\\n  position:fixed;\\n  top: 0px;\\n  right: 0px;\\n  bottom: 0px;\\n  left: 0px;\\n  height: 100vh;\\n  width: 100vw;\\n  display:block;\\n  background:rgba(0,0,0,0.25);\\n  z-index: 2147483647;\\n  box-sizing: border-box;\\n\", document.body.append(t), [t.contentWindow, function () {\n    document.getElementById(ne) && document.getElementById(ne).remove();\n  }];\n}\n\nvar ae = null,\n    ie = null;\n\nfunction se(e, t, r, n, o) {\n  return r.open(e, t, \"toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width=\" + n + \", height=\" + o + \", top=\" + (r.top.outerHeight / 2 + r.top.screenY - o / 2) + \", left=\" + (r.top.outerWidth / 2 + r.top.screenX - n / 2));\n}\n\nfunction ce(e) {\n  var t;\n  null == ae || null != (t = ae) && t.closed ? ae = se(e, \"FCL_POP\", window, 640, 600) : ie !== e ? (ae = se(e, \"FCL_POP\", window, 640, 600)).focus() : ae.focus(), ie = e;\n  var r = setInterval(function () {\n    ae && ae.closed && (clearInterval(r), ae = null);\n  }, 1e3);\n  return [ae, function () {\n    ae && !ae.closed && (ae.close(), ae = null);\n  }];\n}\n\nvar ue = null,\n    de = null;\n\nfunction le(e) {\n  var t;\n  null == ue || null != (t = ue) && t.closed ? ue = window.open(e, \"_blank\") : de !== e ? (ue = window.open(e, \"_blank\")).focus() : ue.focus(), de = e;\n  var r = setInterval(function () {\n    ue && ue.closed && (clearInterval(r), ue = null);\n  }, 1e3);\n  return [ue, function () {\n    ue && !ue.closed && (ue.close(), ue = null);\n  }];\n}\n\nvar fe,\n    pe = {\n  \"VIEW/IFRAME\": oe,\n  \"VIEW/POP\": ce,\n  \"VIEW/TAB\": le\n},\n    he = function (e, t, r) {\n  try {\n    return t.data = e.data, Promise.resolve(X(e, {\n      data: t\n    }).then(Q)).then(function (t) {\n      if (\"APPROVED\" === t.status) return t.data;\n      if (\"DECLINED\" === t.status) throw new Error(\"Declined: \" + (t.reason || \"No reason supplied.\"));\n\n      if (\"PENDING\" === t.status) {\n        var r = !0;\n        return Promise.resolve(function (e, t) {\n          void 0 === t && (t = {});\n\n          try {\n            try {\n              return Promise.resolve(pe[e.method]($(e), t));\n            } catch (r) {\n              throw console.error(\"execLocal({service, opts = {}})\", r, {\n                service: e,\n                opts: t\n              }), r;\n            }\n          } catch (e) {\n            return Promise.reject(e);\n          }\n        }(q(t.local))).then(function (e) {\n          var n = e[1],\n              o = function () {\n            try {\n              n(), r = !1;\n            } catch (e) {\n              console.error(\"Frame Close Error\", e);\n            }\n          };\n\n          return ee(t.updates, function () {\n            return r;\n          }).then(function (e) {\n            return o(), e;\n          }).catch(function (e) {\n            throw console.error(e), o(), e;\n          });\n        });\n      }\n\n      throw console.error(\"Auto Decline: Invalid Response\", {\n        service: e,\n        resp: t\n      }), new Error(\"Auto Decline: Invalid Response\");\n    });\n  } catch (e) {\n    return Promise.reject(e);\n  }\n},\n    ve = function () {},\n    me = function (e) {\n  return \"string\" == typeof e && e.toLowerCase();\n},\n    ye = function (e, t) {\n  return console.warn(\"DEPRECATION NOTICE\", \"Received \" + e + \", please use \" + t + \" for this and future versions of FCL\");\n},\n    Ee = new Set([\"monetizationstart\", \"monetizationpending\", \"monetizationprogress\", \"monetizationstop\"]),\n    ge = function () {},\n    Pe = function (e) {\n  return \"string\" == typeof e && e.toLowerCase();\n},\n    Ce = function (e, t) {\n  return console.warn(\"DEPRECATION NOTICE\", \"Received \" + e + \", please use \" + t + \" for this and future versions of FCL\");\n},\n    Re = new Set([\"monetizationstart\", \"monetizationpending\", \"monetizationprogress\", \"monetizationstop\"]),\n    Se = function () {},\n    we = function (e) {\n  return \"string\" == typeof e && e.toLowerCase();\n},\n    Le = function (e, t) {\n  return console.warn(\"DEPRECATION NOTICE\", \"Received \" + e + \", please use \" + t + \" for this and future versions of FCL\");\n},\n    be = new Set([\"monetizationstart\", \"monetizationpending\", \"monetizationprogress\", \"monetizationstop\"]),\n    Ae = function (e) {\n  var t = e.service,\n      r = e.msg,\n      n = void 0 === r ? {} : r,\n      o = e.opts,\n      a = void 0 === o ? {} : o;\n\n  try {\n    try {\n      return Promise.resolve(Ie[t.method](t, n, a));\n    } catch (e) {\n      throw console.error(\"execService({service, msg = {}, opts = {}})\", e, {\n        service: t,\n        msg: n,\n        opts: a\n      }), e;\n    }\n  } catch (e) {\n    return Promise.reject(e);\n  }\n},\n    Ie = {\n  \"HTTP/RPC\": he,\n  \"HTTP/POST\": he,\n  \"IFRAME/RPC\": function (e, t, r) {\n    return new Promise(function (n, o) {\n      var a = b(),\n          i = r.includeOlderJsonRpcCall;\n      t.data = e.data, function (e, t) {\n        if (void 0 === t && (t = {}), null == e) return {\n          send: ve,\n          close: ve\n        };\n        var r = t.onClose || ve,\n            n = t.onMessage || ve,\n            o = t.onReady || ve,\n            a = t.onResponse || ve;\n        window.addEventListener(\"message\", u);\n        var i = oe($(e)),\n            s = i[0],\n            c = i[1];\n        return {\n          send: l,\n          close: d\n        };\n\n        function u(e) {\n          try {\n            if (\"object\" != typeof e.data) return;\n            if (Ee.has(e.data.type)) return;\n            me(e.data.type) === me(\"FCL:VIEW:CLOSE\") && d(), me(e.data.type) === me(\"FCL:VIEW:READY\") && o(e, {\n              send: l,\n              close: d\n            }), me(e.data.type) === me(\"FCL:VIEW:RESPONSE\") && a(e, {\n              send: l,\n              close: d\n            }), n(e, {\n              send: l,\n              close: d\n            }), me(e.data.type) === me(\"FCL:FRAME:READY\") && (ye(e.data.type, \"FCL:VIEW:READY\"), o(e, {\n              send: l,\n              close: d\n            })), me(e.data.type) === me(\"FCL:FRAME:RESPONSE\") && (ye(e.data.type, \"FCL:VIEW:RESPONSE\"), a(e, {\n              send: l,\n              close: d\n            })), me(e.data.type) === me(\"FCL:FRAME:CLOSE\") && (ye(e.data.type, \"FCL:VIEW:CLOSE\"), d()), me(e.data.type) === me(\"FCL::CHALLENGE::RESPONSE\") && (ye(e.data.type, \"FCL:VIEW:RESPONSE\"), a(e, {\n              send: l,\n              close: d\n            })), me(e.data.type) === me(\"FCL::AUTHZ_READY\") && (ye(e.data.type, \"FCL:VIEW:READY\"), o(e, {\n              send: l,\n              close: d\n            })), me(e.data.type) === me(\"FCL::CHALLENGE::CANCEL\") && (ye(e.data.type, \"FCL:VIEW:CLOSE\"), d()), me(e.data.type) === me(\"FCL::CANCEL\") && (ye(e.data.type, \"FCL:VIEW:CLOSE\"), d());\n          } catch (e) {\n            console.error(\"Frame Callback Error\", e), d();\n          }\n        }\n\n        function d() {\n          try {\n            window.removeEventListener(\"message\", u), c(), r();\n          } catch (e) {\n            console.error(\"Frame Close Error\", e);\n          }\n        }\n\n        function l(e) {\n          try {\n            s.postMessage(JSON.parse(JSON.stringify(e || {})), \"*\");\n          } catch (t) {\n            console.error(\"Frame Send Error\", e, t);\n          }\n        }\n      }(e, {\n        onReady: function (r, n) {\n          var o = n.send;\n\n          try {\n            return Promise.resolve(function (e, t) {\n              try {\n                var r = e();\n              } catch (e) {\n                return t(e);\n              }\n\n              return r && r.then ? r.then(void 0, t) : r;\n            }(function () {\n              var r = {\n                params: e.params,\n                data: e.data\n              };\n              return Promise.resolve(A(/^service\\./)).then(function (n) {\n                return Promise.resolve(A(/^app\\.detail\\./)).then(function (s) {\n                  o({\n                    type: \"FCL:VIEW:READY:RESPONSE\",\n                    body: t,\n                    service: r,\n                    config: {\n                      services: n,\n                      app: s\n                    }\n                  });\n                  var c = {\n                    params: e.params,\n                    data: e.data\n                  };\n                  return Promise.resolve(A(/^service\\./)).then(function (r) {\n                    return Promise.resolve(A(/^app\\.detail\\./)).then(function (n) {\n                      o({\n                        type: \"FCL:FRAME:READY:RESPONSE\",\n                        body: t,\n                        service: c,\n                        config: {\n                          services: r,\n                          app: n\n                        },\n                        deprecated: {\n                          message: \"FCL:FRAME:READY:RESPONSE is deprecated and replaced with type: FCL:VIEW:READY:RESPONSE\"\n                        }\n                      }), i && o({\n                        jsonrpc: \"2.0\",\n                        id: a,\n                        method: \"fcl:sign\",\n                        params: [t, e.params],\n                        deprecated: {\n                          message: \"jsonrpc is deprecated and replaced with type: FCL:VIEW:READY:RESPONSE\"\n                        }\n                      });\n                    });\n                  });\n                });\n              });\n            }, function (e) {\n              throw e;\n            }));\n          } catch (e) {\n            return Promise.reject(e);\n          }\n        },\n        onResponse: function (e, t) {\n          var r = t.close;\n\n          try {\n            if (\"object\" != typeof e.data) return;\n            var a = Q(e.data);\n\n            switch (a.status) {\n              case \"APPROVED\":\n                n(a.data), r();\n                break;\n\n              case \"DECLINED\":\n                o(\"Declined: \" + (a.reason || \"No reason supplied\")), r();\n                break;\n\n              default:\n                o(\"Declined: No reason supplied\"), r();\n            }\n          } catch (e) {\n            throw console.error(\"execIframeRPC onResponse error\", e), e;\n          }\n        },\n        onMessage: function (e, t) {\n          var r = t.close;\n\n          try {\n            if (\"object\" != typeof e.data) return;\n            if (\"2.0\" !== e.data.jsonrpc) return;\n            if (e.data.id !== a) return;\n            var i = Q(e.data.result);\n\n            switch (i.status) {\n              case \"APPROVED\":\n                n(i.data), r();\n                break;\n\n              case \"DECLINED\":\n                o(\"Declined: \" + (i.reason || \"No reason supplied\")), r();\n                break;\n\n              default:\n                o(\"Declined: No reason supplied\"), r();\n            }\n          } catch (e) {\n            throw console.error(\"execIframeRPC onMessage error\", e), e;\n          }\n        },\n        onClose: function () {\n          o(\"Declined: Externally Halted\");\n        }\n      });\n    });\n  },\n  \"POP/RPC\": function (e, t, r) {\n    return new Promise(function (n, o) {\n      var a = b(),\n          i = r.includeOlderJsonRpcCall;\n      t.data = e.data, function (e, t) {\n        if (void 0 === t && (t = {}), null == e) return {\n          send: ge,\n          close: ge\n        };\n        var r = t.onClose || ge,\n            n = t.onMessage || ge,\n            o = t.onReady || ge,\n            a = t.onResponse || ge;\n        window.addEventListener(\"message\", u);\n        var i = ce($(e)),\n            s = i[0],\n            c = i[1];\n        return {\n          send: l,\n          close: d\n        };\n\n        function u(e) {\n          try {\n            if (\"object\" != typeof e.data) return;\n            if (Re.has(e.data.type)) return;\n            Pe(e.data.type) === Pe(\"FCL:VIEW:CLOSE\") && d(), Pe(e.data.type) === Pe(\"FCL:VIEW:READY\") && o(e, {\n              send: l,\n              close: d\n            }), Pe(e.data.type) === Pe(\"FCL:VIEW:RESPONSE\") && a(e, {\n              send: l,\n              close: d\n            }), n(e, {\n              send: l,\n              close: d\n            }), Pe(e.data.type) === Pe(\"FCL:FRAME:READY\") && (Ce(e.data.type, \"FCL:VIEW:READY\"), o(e, {\n              send: l,\n              close: d\n            })), Pe(e.data.type) === Pe(\"FCL:FRAME:RESPONSE\") && (Ce(e.data.type, \"FCL:VIEW:RESPONSE\"), a(e, {\n              send: l,\n              close: d\n            })), Pe(e.data.type) === Pe(\"FCL:FRAME:CLOSE\") && (Ce(e.data.type, \"FCL:VIEW:CLOSE\"), d()), Pe(e.data.type) === Pe(\"FCL::CHALLENGE::RESPONSE\") && (Ce(e.data.type, \"FCL:VIEW:RESPONSE\"), a(e, {\n              send: l,\n              close: d\n            })), Pe(e.data.type) === Pe(\"FCL::AUTHZ_READY\") && (Ce(e.data.type, \"FCL:VIEW:READY\"), o(e, {\n              send: l,\n              close: d\n            })), Pe(e.data.type) === Pe(\"FCL::CHALLENGE::CANCEL\") && (Ce(e.data.type, \"FCL:VIEW:CLOSE\"), d()), Pe(e.data.type) === Pe(\"FCL::CANCEL\") && (Ce(e.data.type, \"FCL:VIEW:CLOSE\"), d());\n          } catch (e) {\n            console.error(\"Popup Callback Error\", e), d();\n          }\n        }\n\n        function d() {\n          try {\n            window.removeEventListener(\"message\", u), c(), r();\n          } catch (e) {\n            console.error(\"Popup Close Error\", e);\n          }\n        }\n\n        function l(e) {\n          try {\n            s.postMessage(JSON.parse(JSON.stringify(e || {})), \"*\");\n          } catch (t) {\n            console.error(\"Popup Send Error\", e, t);\n          }\n        }\n      }(e, {\n        onReady: function (r, n) {\n          var o = n.send;\n\n          try {\n            return Promise.resolve(function (e, t) {\n              try {\n                var r = e();\n              } catch (e) {\n                return t(e);\n              }\n\n              return r && r.then ? r.then(void 0, t) : r;\n            }(function () {\n              var r = {\n                params: e.params,\n                data: e.data\n              };\n              return Promise.resolve(A(/^service\\./)).then(function (n) {\n                return Promise.resolve(A(/^app\\.detail\\./)).then(function (s) {\n                  o({\n                    type: \"FCL:VIEW:READY:RESPONSE\",\n                    body: t,\n                    service: r,\n                    config: {\n                      services: n,\n                      app: s\n                    }\n                  });\n                  var c = {\n                    params: e.params,\n                    data: e.data\n                  };\n                  return Promise.resolve(A(/^service\\./)).then(function (r) {\n                    return Promise.resolve(A(/^app\\.detail\\./)).then(function (n) {\n                      o({\n                        type: \"FCL:FRAME:READY:RESPONSE\",\n                        body: t,\n                        service: c,\n                        config: {\n                          services: r,\n                          app: n\n                        },\n                        deprecated: {\n                          message: \"FCL:FRAME:READY:RESPONSE is deprecated and replaced with type: FCL:VIEW:READY:RESPONSE\"\n                        }\n                      }), i && o({\n                        jsonrpc: \"2.0\",\n                        id: a,\n                        method: \"fcl:sign\",\n                        params: [t, e.params]\n                      });\n                    });\n                  });\n                });\n              });\n            }, function (e) {\n              throw e;\n            }));\n          } catch (e) {\n            return Promise.reject(e);\n          }\n        },\n        onResponse: function (e, t) {\n          var r = t.close;\n\n          try {\n            if (\"object\" != typeof e.data) return;\n            var a = Q(e.data);\n\n            switch (a.status) {\n              case \"APPROVED\":\n                n(a.data), r();\n                break;\n\n              case \"DECLINED\":\n                o(\"Declined: \" + (a.reason || \"No reason supplied\")), r();\n                break;\n\n              default:\n                o(\"Declined: No reason supplied\"), r();\n            }\n          } catch (e) {\n            throw console.error(\"execPopRPC onResponse error\", e), e;\n          }\n        },\n        onMessage: function (e, t) {\n          var r = t.close;\n\n          try {\n            if (\"object\" != typeof e.data) return;\n            if (\"2.0\" !== e.data.jsonrpc) return;\n            if (e.data.id !== a) return;\n            var i = Q(e.data.result);\n\n            switch (i.status) {\n              case \"APPROVED\":\n                n(i.data), r();\n                break;\n\n              case \"DECLINED\":\n                o(\"Declined: \" + (i.reason || \"No reason supplied\")), r();\n                break;\n\n              default:\n                o(\"Declined: No reason supplied\"), r();\n            }\n          } catch (e) {\n            throw console.error(\"execPopRPC onMessage error\", e), e;\n          }\n        },\n        onClose: function () {\n          o(\"Declined: Externally Halted\");\n        }\n      });\n    });\n  },\n  \"TAB/RPC\": function (e, t, r) {\n    return new Promise(function (n, o) {\n      var a = b(),\n          i = r.includeOlderJsonRpcCall;\n      t.data = e.data, function (e, t) {\n        if (void 0 === t && (t = {}), null == e) return {\n          send: Se,\n          close: Se\n        };\n        var r = t.onClose || Se,\n            n = t.onMessage || Se,\n            o = t.onReady || Se,\n            a = t.onResponse || Se;\n        window.addEventListener(\"message\", u);\n        var i = le($(e)),\n            s = i[0],\n            c = i[1];\n        return {\n          send: l,\n          close: d\n        };\n\n        function u(e) {\n          try {\n            if (\"object\" != typeof e.data) return;\n            if (be.has(e.data.type)) return;\n            we(e.data.type) === we(\"FCL:VIEW:CLOSE\") && d(), we(e.data.type) === we(\"FCL:VIEW:READY\") && o(e, {\n              send: l,\n              close: d\n            }), we(e.data.type) === we(\"FCL:VIEW:RESPONSE\") && a(e, {\n              send: l,\n              close: d\n            }), n(e, {\n              send: l,\n              close: d\n            }), we(e.data.type) === we(\"FCL:FRAME:READY\") && (Le(e.data.type, \"FCL:VIEW:READY\"), o(e, {\n              send: l,\n              close: d\n            })), we(e.data.type) === we(\"FCL:FRAME:RESPONSE\") && (Le(e.data.type, \"FCL:VIEW:RESPONSE\"), a(e, {\n              send: l,\n              close: d\n            })), we(e.data.type) === we(\"FCL:FRAME:CLOSE\") && (Le(e.data.type, \"FCL:VIEW:CLOSE\"), d()), we(e.data.type) === we(\"FCL::CHALLENGE::RESPONSE\") && (Le(e.data.type, \"FCL:VIEW:RESPONSE\"), a(e, {\n              send: l,\n              close: d\n            })), we(e.data.type) === we(\"FCL::AUTHZ_READY\") && (Le(e.data.type, \"FCL:VIEW:READY\"), o(e, {\n              send: l,\n              close: d\n            })), we(e.data.type) === we(\"FCL::CHALLENGE::CANCEL\") && (Le(e.data.type, \"FCL:VIEW:CLOSE\"), d()), we(e.data.type) === we(\"FCL::CANCEL\") && (Le(e.data.type, \"FCL:VIEW:CLOSE\"), d());\n          } catch (e) {\n            console.error(\"Tab Callback Error\", e), d();\n          }\n        }\n\n        function d() {\n          try {\n            window.removeEventListener(\"message\", u), c(), r();\n          } catch (e) {\n            console.error(\"Tab Close Error\", e);\n          }\n        }\n\n        function l(e) {\n          try {\n            s.postMessage(JSON.parse(JSON.stringify(e || {})), \"*\");\n          } catch (t) {\n            console.error(\"Tab Send Error\", e, t);\n          }\n        }\n      }(e, {\n        onReady: function (r, n) {\n          var o = n.send;\n\n          try {\n            return Promise.resolve(function (e, t) {\n              try {\n                var r = e();\n              } catch (e) {\n                return t(e);\n              }\n\n              return r && r.then ? r.then(void 0, t) : r;\n            }(function () {\n              var r = {\n                params: e.params,\n                data: e.data\n              };\n              return Promise.resolve(A(/^service\\./)).then(function (n) {\n                return Promise.resolve(A(/^app\\.detail\\./)).then(function (s) {\n                  o({\n                    type: \"FCL:VIEW:READY:RESPONSE\",\n                    body: t,\n                    service: r,\n                    config: {\n                      services: n,\n                      app: s\n                    }\n                  });\n                  var c = {\n                    params: e.params,\n                    data: e.data\n                  };\n                  return Promise.resolve(A(/^service\\./)).then(function (r) {\n                    return Promise.resolve(A(/^app\\.detail\\./)).then(function (n) {\n                      o({\n                        type: \"FCL:FRAME:READY:RESPONSE\",\n                        body: t,\n                        service: c,\n                        config: {\n                          services: r,\n                          app: n\n                        },\n                        deprecated: {\n                          message: \"FCL:FRAME:READY:RESPONSE is deprecated and replaced with type: FCL:VIEW:READY:RESPONSE\"\n                        }\n                      }), i && o({\n                        jsonrpc: \"2.0\",\n                        id: a,\n                        method: \"fcl:sign\",\n                        params: [t, e.params]\n                      });\n                    });\n                  });\n                });\n              });\n            }, function (e) {\n              throw e;\n            }));\n          } catch (e) {\n            return Promise.reject(e);\n          }\n        },\n        onResponse: function (e, t) {\n          var r = t.close;\n\n          try {\n            if (\"object\" != typeof e.data) return;\n            var a = Q(e.data);\n\n            switch (a.status) {\n              case \"APPROVED\":\n                n(a.data), r();\n                break;\n\n              case \"DECLINED\":\n                o(\"Declined: \" + (a.reason || \"No reason supplied\")), r();\n                break;\n\n              default:\n                o(\"Declined: No reason supplied\"), r();\n            }\n          } catch (e) {\n            throw console.error(\"execPopRPC onResponse error\", e), e;\n          }\n        },\n        onMessage: function (e, t) {\n          var r = t.close;\n\n          try {\n            if (\"object\" != typeof e.data) return;\n            if (\"2.0\" !== e.data.jsonrpc) return;\n            if (e.data.id !== a) return;\n            var i = Q(e.data.result);\n\n            switch (i.status) {\n              case \"APPROVED\":\n                n(i.data), r();\n                break;\n\n              case \"DECLINED\":\n                o(\"Declined: \" + (i.reason || \"No reason supplied\")), r();\n                break;\n\n              default:\n                o(\"Declined: No reason supplied\"), r();\n            }\n          } catch (e) {\n            throw console.error(\"execPopRPC onMessage error\", e), e;\n          }\n        },\n        onClose: function () {\n          o(\"Declined: Externally Halted\");\n        }\n      });\n    });\n  }\n},\n    Fe = function (e, t) {\n  try {\n    f(/^[0-9a-f]+$/i.test(e), \"Message must be a hex string\"), f(Array.isArray(t), \"Must include an Array of composite signatures\");\n    var n = [],\n        o = [],\n        a = [];\n    return Promise.resolve(Promise.all(t.map(function (e) {\n      try {\n        return f(\"string\" == typeof e.addr, \"addr must be a string\"), f(\"number\" == typeof e.keyId, \"keyId must be a number\"), f(\"string\" == typeof e.signature, \"signature must be a string\"), Promise.resolve(function (t, i) {\n          try {\n            var s = Promise.resolve(r(e.addr)).then(function (t) {\n              return n.push(t.keys[e.keyId].weight.toFixed(1)), o.push(t.keys[e.keyId].signAlgo), a.push(e.signature), t.keys[e.keyId].publicKey;\n            });\n          } catch (e) {\n            return i(e);\n          }\n\n          return s && s.then ? s.then(void 0, i) : s;\n        }(0, function (e) {\n          throw e;\n        }));\n      } catch (e) {\n        return Promise.reject(e);\n      }\n    }))).then(function (t) {\n      return Promise.resolve(_({\n        cadence: \"\" + Oe,\n        args: function (r, i) {\n          return [r(e, i.String), r(t, i.Array([i.String])), r(n, i.Array(i.UFix64)), r(o, i.Array([i.UInt])), r(a, i.Array([i.String]))];\n        }\n      }));\n    });\n  } catch (e) {\n    return Promise.reject(e);\n  }\n},\n    Oe = \"\\nimport Crypto\\n    \\npub fun main(\\n  message: String,\\n  rawPublicKeys: [String],\\n  weights: [UFix64],\\n  signAlgos: [UInt],\\n  signatures: [String],\\n): Bool {\\n\\n  let keyList = Crypto.KeyList()\\n  \\n  var i = 0\\n  for rawPublicKey in rawPublicKeys {\\n    keyList.add(\\n      PublicKey(\\n        publicKey: rawPublicKey.decodeHex(),\\n        signatureAlgorithm: signAlgos[i] == 2 ? SignatureAlgorithm.ECDSA_P256 : SignatureAlgorithm.ECDSA_secp256k1 \\n      ),\\n      hashAlgorithm: HashAlgorithm.SHA3_256,\\n      weight: weights[i],\\n    )\\n    i = i + 1\\n  }\\n\\n  let signatureSet: [Crypto.KeyListSignature] = []\\n\\n  var j = 0\\n  for signature in signatures {\\n    signatureSet.append(\\n      Crypto.KeyListSignature(\\n        keyIndex: j,\\n        signature: signature.decodeHex()\\n      )\\n    )\\n    j = j + 1\\n  }\\n    \\n  let signedData = message.decodeHex()\\n  \\n  return keyList.verify(\\n    signatureSet: signatureSet,\\n    signedData: signedData\\n  )\\n}\\n\";\n\nfunction Ne(e) {\n  if (null == e) return null;\n\n  switch (e.f_vsn) {\n    case \"1.0.0\":\n      return e;\n\n    default:\n      return V({}, Y, {\n        addr: w(e.addr || e.address),\n        signature: e.signature || e.sig,\n        keyId: e.keyId\n      });\n  }\n}\n\nfunction De(e, t, r) {\n  if (!e.s) {\n    if (r instanceof _e) {\n      if (!r.s) return void (r.o = De.bind(null, e, t));\n      1 & t && (t = r.s), r = r.v;\n    }\n\n    if (r && r.then) return void r.then(De.bind(null, e, t), De.bind(null, e, 2));\n    e.s = t, e.v = r;\n    var n = e.o;\n    n && n(e);\n  }\n}\n\nvar ke = function (e, t) {\n  try {\n    return console.warn(\"\\n    %cFCL/SDK Deprecation Notice\\n    ============================\\n    verifyUserSignatures is no longer exported as fcl.currentUser().verifyUserSignatures\\n    and is now available as fcl.verifyUserSignatures\\n    ============================\\n    \", \"font-weight:bold;font-family:monospace;\"), Promise.resolve(Fe(e, t));\n  } catch (e) {\n    return Promise.reject(e);\n  }\n},\n    je = function (e) {\n  try {\n    return Be(), Promise.resolve(xe()).then(function (t) {\n      var r = Z(t.services, \"user-signature\");\n      return f(r, \"Current user must have authorized a signing service.\"), Me(function () {\n        return Promise.resolve(Ae({\n          service: r,\n          msg: Xe(e)\n        })).then(function (e) {\n          return Array.isArray(e) ? e.map(function (e) {\n            return Ne(e);\n          }) : [Ne(e)];\n        });\n      }, function (e) {\n        return e;\n      });\n    });\n  } catch (e) {\n    return Promise.reject(e);\n  }\n},\n    Te = function (e) {\n  try {\n    return Be(), Promise.resolve(xe()).then(function (t) {\n      var r = Z(t.services, \"authz\"),\n          n = Z(t.services, \"pre-authz\");\n      return V({}, e, n ? {\n        tempId: \"CURRENT_USER\",\n        resolve: function (e, t) {\n          try {\n            return Promise.resolve(Ae({\n              service: n,\n              msg: t\n            })).then(Ke);\n          } catch (e) {\n            return Promise.reject(e);\n          }\n        }\n      } : {\n        tempId: \"CURRENT_USER\",\n        resolve: null,\n        addr: w(r.identity.address),\n        keyId: r.identity.keyId,\n        sequenceNum: null,\n        signature: null,\n        signingFunction: function (e) {\n          try {\n            return Promise.resolve(Ae({\n              service: r,\n              msg: e,\n              opts: {\n                includeOlderJsonRpcCall: !0\n              }\n            })).then(Ne);\n          } catch (e) {\n            return Promise.reject(e);\n          }\n        }\n      });\n    });\n  } catch (e) {\n    return Promise.reject(e);\n  }\n},\n    _e = function () {\n  function e() {}\n\n  return e.prototype.then = function (t, r) {\n    var n = new e(),\n        o = this.s;\n\n    if (o) {\n      var a = 1 & o ? t : r;\n\n      if (a) {\n        try {\n          De(n, 1, a(this.v));\n        } catch (e) {\n          De(n, 2, e);\n        }\n\n        return n;\n      }\n\n      return this;\n    }\n\n    return this.o = function (e) {\n      try {\n        var o = e.v;\n        1 & e.s ? De(n, 1, t ? t(o) : o) : r ? De(n, 1, r(o)) : De(n, 2, o);\n      } catch (e) {\n        De(n, 2, e);\n      }\n    }, n;\n  }, e;\n}();\n\nfunction Ve(e) {\n  return e instanceof _e && 1 & e.s;\n}\n\nvar xe = function () {\n  try {\n    return Promise.resolve(new Promise(function (e, r) {\n      try {\n        return Be(), Promise.resolve(Ze()).then(function (r) {\n          return r.loggedIn && Je(r) ? e(r) : Promise.resolve(t.first([\"discovery.wallet\", \"challenge.handshake\"])).then(function (r) {\n            try {\n              if (null == r) throw console.warn('Required value for \"discovery.wallet\" not defined in config. See: https://github.com/onflow/flow-js-sdk/blob/master/packages/fcl/src/exec/query.md#configuration'), new Error('Required config value \"discovery.wallet\" is not defined');\n            } catch (e) {\n              console.error(e);\n            }\n\n            return Promise.resolve(t.first([\"discovery.wallet.method\", \"discovery.wallet.method.default\"], \"IFRAME/RPC\")).then(function (t) {\n              var n = function (e, n) {\n                try {\n                  var o = Me(function () {\n                    return Promise.resolve(Ae({\n                      service: {\n                        endpoint: r,\n                        method: t\n                      }\n                    })).then(function (e) {\n                      return Promise.resolve(function (e) {\n                        try {\n                          var t = (e = function (e) {\n                            return e.addr = e.addr ? S(e.addr) : null, e.paddr = e.paddr ? S(e.paddr) : null, e;\n                          }(e)).services || [];\n\n                          return Promise.resolve(function (e, t) {\n                            try {\n                              if (null == e || null == t) return Promise.resolve([]);\n                              var r = new URL(e);\n                              return r.searchParams.append(\"code\", t), Promise.resolve(fetch(r, {\n                                method: \"GET\",\n                                headers: {\n                                  \"Content-Type\": \"application/json\"\n                                }\n                              }).then(function (e) {\n                                return e.json();\n                              })).then(function (e) {\n                                if (Array.isArray(e)) return e;\n                                var t = [];\n                                if (Array.isArray(e.authorizations)) for (var r, n = M(e.authorizations); !(r = n()).done;) t.push(V({\n                                  type: \"authz\",\n                                  keyId: e.keyId\n                                }, r.value));\n                                return null != e.provider && t.push(V({\n                                  type: \"authn\",\n                                  id: \"wallet-provider#authn\"\n                                }, e.provider)), t;\n                              });\n                            } catch (e) {\n                              return Promise.reject(e);\n                            }\n                          }(e.hks, e.code)).then(function (r) {\n                            var n,\n                                o,\n                                a = (n = t, o = r, void 0 === n && (n = []), void 0 === o && (o = []), [].concat(n, o)).map(function (t) {\n                              return function (e, t) {\n                                try {\n                                  return K[e.type](e, t);\n                                } catch (t) {\n                                  return console.error(\"Unrecognized FCL Service Type [\" + e.type + \"]\", e, t), e;\n                                }\n                              }(t, e);\n                            }),\n                                i = function (e, t) {\n                              return t.find(function (e) {\n                                return \"authn\" === e.type;\n                              });\n                            }(0, a);\n\n                            return V({}, z, {\n                              addr: S(e.addr),\n                              cid: G(i),\n                              loggedIn: !0,\n                              services: a,\n                              expiresAt: e.exp\n                            });\n                          });\n                        } catch (e) {\n                          return Promise.reject(e);\n                        }\n                      }(e)).then(function (e) {\n                        E(We, ze, e);\n                      });\n                    });\n                  }, function (e) {\n                    console.error(\"Error while authenticating\", e);\n                  });\n                } catch (e) {\n                  return n(!0, e);\n                }\n\n                return o && o.then ? o.then(n.bind(null, !1), n.bind(null, !0)) : n(!1, o);\n              }(0, function (t, r) {\n                return Promise.resolve(Ze()).then(function (n) {\n                  if (e(n), t) throw r;\n                  return r;\n                });\n              });\n\n              if (n && n.then) return n.then(function () {});\n            });\n          });\n        });\n      } catch (e) {\n        return Promise.reject(e);\n      }\n    }));\n  } catch (e) {\n    return Promise.reject(e);\n  }\n};\n\nfunction Me(e, t) {\n  try {\n    var r = e();\n  } catch (e) {\n    return t(e);\n  }\n\n  return r && r.then ? r.then(void 0, t) : r;\n}\n\nvar We = \"CURRENT_USER\",\n    Ue = \"CURRENT_USER/UPDATED\",\n    ze = \"SET_CURRENT_USER\",\n    He = '{\\n  \"f_type\": \"User\",\\n  \"f_vsn\": \"1.0.0\",\\n  \"addr\":null,\\n  \"cid\":null,\\n  \"loggedIn\":null,\\n  \"expiresAt\":null,\\n  \"services\":[]\\n}',\n    Ye = ((fe = {})[h] = function (e) {\n  try {\n    return e.merge(JSON.parse(He)), Promise.resolve(t.first([\"fcl.storage\", \"fcl.storage.default\"])).then(function (t) {\n      var r = function () {\n        if (t.can) return Promise.resolve(function (e) {\n          try {\n            var t = JSON.parse(He);\n            return Promise.resolve(e.get(We)).then(function (r) {\n              return null != r && t.f_vsn !== r.f_vsn ? (e.removeItem(We), t) : r || t;\n            });\n          } catch (e) {\n            return Promise.reject(e);\n          }\n        }(t)).then(function (t) {\n          Je(t) && e.merge(t);\n        });\n      }();\n\n      if (r && r.then) return r.then(function () {});\n    });\n  } catch (e) {\n    return Promise.reject(e);\n  }\n}, fe[v] = function (e, t) {\n  e.subscribe(t.from), e.send(t.from, Ue, V({}, e.all()));\n}, fe[m] = function (e, t) {\n  e.unsubscribe(t.from);\n}, fe.SNAPSHOT = function (e, t) {\n  try {\n    return t.reply(V({}, e.all())), Promise.resolve();\n  } catch (e) {\n    return Promise.reject(e);\n  }\n}, fe[ze] = function (e, r, n) {\n  try {\n    return e.merge(n), Promise.resolve(t.first([\"fcl.storage\", \"fcl.storage.default\"])).then(function (t) {\n      t.can && t.put(We, e.all()), e.broadcast(Ue, V({}, e.all()));\n    });\n  } catch (e) {\n    return Promise.reject(e);\n  }\n}, fe.DEL_CURRENT_USER = function (e, r) {\n  try {\n    return e.merge(JSON.parse(He)), Promise.resolve(t.first([\"fcl.storage\", \"fcl.storage.default\"])).then(function (t) {\n      t.can && t.put(We, e.all()), e.broadcast(Ue, V({}, e.all()));\n    });\n  } catch (e) {\n    return Promise.reject(e);\n  }\n}, fe),\n    Be = function () {\n  return y(Ye, We);\n};\n\nfunction Je(e) {\n  return null == e.expiresAt || 0 === e.expiresAt || e.expiresAt > Date.now();\n}\n\nfunction qe() {\n  Be(), E(We, \"DEL_CURRENT_USER\");\n}\n\nfunction Ke(e) {\n  var t = function (e) {\n    return {\n      f_type: \"PreAuthzResponse\",\n      f_vsn: \"1.0.0\",\n      proposer: (e || {}).proposer,\n      payer: (e || {}).payer || [],\n      authorization: (e || {}).authorization || []\n    };\n  }(e),\n      r = [];\n\n  null != t.proposer && r.push([\"PROPOSER\", t.proposer]);\n\n  for (var n, o = M(t.payer || []); !(n = o()).done;) r.push([\"PAYER\", n.value]);\n\n  for (var a, i = M(t.authorization || []); !(a = i()).done;) r.push([\"AUTHORIZER\", a.value]);\n\n  return r.map(function (e) {\n    var t = e[0],\n        r = e[1];\n    return {\n      tempId: [r.identity.address, r.identity.keyId].join(\"|\"),\n      addr: r.identity.address,\n      keyId: r.identity.keyId,\n      signingFunction: function (e) {\n        return Ae({\n          service: r,\n          msg: e\n        });\n      },\n      role: {\n        proposer: \"PROPOSER\" === t,\n        payer: \"PAYER\" === t,\n        authorizer: \"AUTHORIZER\" === t\n      }\n    };\n  });\n}\n\nfunction Ge(e) {\n  Be();\n  var t = \"@EXIT\",\n      r = y(function (r) {\n    try {\n      var n;\n      return r.send(We, v), Promise.resolve(function (e, t, r) {\n        for (var n;;) {\n          var o = e();\n          if (Ve(o) && (o = o.v), !o) return a;\n\n          if (o.then) {\n            n = 0;\n            break;\n          }\n\n          var a = r();\n\n          if (a && a.then) {\n            if (!Ve(a)) {\n              n = 1;\n              break;\n            }\n\n            a = a.s;\n          }\n        }\n\n        var i = new _e(),\n            s = De.bind(null, i, 2);\n        return (0 === n ? o.then(u) : 1 === n ? a.then(c) : (void 0).then(function () {\n          (o = e()) ? o.then ? o.then(u).then(void 0, s) : u(o) : De(i, 1, a);\n        })).then(void 0, s), i;\n\n        function c(t) {\n          a = t;\n\n          do {\n            if (!(o = e()) || Ve(o) && !o.v) return void De(i, 1, a);\n            if (o.then) return void o.then(u).then(void 0, s);\n            Ve(a = r()) && (a = a.v);\n          } while (!a || !a.then);\n\n          a.then(c).then(void 0, s);\n        }\n\n        function u(e) {\n          e ? (a = r()) && a.then ? a.then(c).then(void 0, s) : c(a) : De(i, 1, a);\n        }\n      }(function () {\n        return !n && 1;\n      }, 0, function () {\n        return Promise.resolve(r.receive()).then(function (o) {\n          if (o.tag === t) return r.send(We, m), void (n = 1);\n          e(o.data);\n        });\n      }));\n    } catch (e) {\n      return Promise.reject(e);\n    }\n  });\n  return function () {\n    return E(r, t);\n  };\n}\n\nfunction Ze() {\n  return Be(), E(We, \"SNAPSHOT\", null, {\n    expectReply: !0,\n    timeout: 0\n  });\n}\n\nvar $e,\n    Xe = function (e) {\n  return f(/^[0-9a-f]+$/i.test(e), \"Message must be a hex string\"), {\n    message: e\n  };\n},\n    Qe = function () {\n  return {\n    authenticate: xe,\n    unauthenticate: qe,\n    authorization: Te,\n    signUserMessage: je,\n    verifyUserSignatures: ke,\n    subscribe: Ge,\n    snapshot: Ze\n  };\n};\n\nQe.authenticate = xe, Qe.unauthenticate = qe, Qe.authorization = Te, Qe.signUserMessage = je, Qe.verifyUserSignatures = ke, Qe.subscribe = Ge, Qe.snapshot = Ze;\n\nvar et = function (e) {\n  try {\n    return Promise.resolve(n([o(e)]).then(a));\n  } catch (e) {\n    return Promise.reject(e);\n  }\n},\n    tt = function (e) {\n  return e.status >= 4;\n},\n    rt = function (e) {\n  return e.status >= 3;\n},\n    nt = function (e) {\n  return e.status >= 2;\n},\n    ot = (($e = {})[h] = function (e) {\n  try {\n    return Promise.resolve(et(e.self())).then(function (t) {\n      tt(t) || setTimeout(function () {\n        return e.sendSelf(\"POLL\");\n      }, 2500), e.merge(t);\n    });\n  } catch (e) {\n    return Promise.reject(e);\n  }\n}, $e[v] = function (e, t) {\n  e.subscribe(t.from), e.send(t.from, g, e.all());\n}, $e[m] = function (e, t) {\n  e.unsubscribe(t.from);\n}, $e[P] = function (e, t) {\n  try {\n    return t.reply(e.all()), Promise.resolve();\n  } catch (e) {\n    return Promise.reject(e);\n  }\n}, $e.POLL = function (e) {\n  try {\n    return Promise.resolve(et(e.self())).then(function (t) {\n      var r, n;\n      tt(t) || setTimeout(function () {\n        return e.sendSelf(\"POLL\");\n      }, 2500), r = e.all(), n = t, JSON.stringify(r) !== JSON.stringify(n) && e.broadcast(g, t), e.merge(t);\n    });\n  } catch (e) {\n    return Promise.reject(e);\n  }\n}, $e),\n    at = function (e) {\n  if (\"object\" == typeof e && (e = e.transactionId), null == e) throw new Error(\"transactionId required\");\n  return e;\n},\n    it = function (e) {\n  return y(ot, at(e));\n};\n\nfunction st(e) {\n  function t(t) {\n    return C(at(e), it, t);\n  }\n\n  function r(e) {\n    return function (r) {\n      void 0 === r && (r = {});\n      var n = r.suppress || !1;\n      return new Promise(function (r, o) {\n        var a = t(function (t) {\n          t.statusCode && !n ? (o(t.errorMessage), a()) : e(t) && (r(t), a());\n        });\n      });\n    };\n  }\n\n  return {\n    snapshot: function () {\n      return R(e, it);\n    },\n    subscribe: t,\n    onceFinalized: r(nt),\n    onceExecuted: r(rt),\n    onceSealed: r(tt)\n  };\n}\n\nst.isUnknown = function (e) {\n  return e.status >= 0;\n}, st.isPending = function (e) {\n  return e.status >= 1;\n}, st.isFinalized = nt, st.isExecuted = rt, st.isSealed = tt, st.isExpired = function (e) {\n  return 5 === e.status;\n};\n\nvar ct,\n    ut = function (t) {\n  void 0 === t && (t = {});\n\n  try {\n    return Promise.resolve(function (r, n) {\n      try {\n        var o = Promise.resolve(function (t) {\n          try {\n            return f(O(t), \"mutate(opts) -- opts is required\"), f(N(t), \"mutate(opts) -- opts must be an object\"), f(O(t.cadence), \"mutate({ cadence }) -- cadence is required\"), f(D(t.cadence), \"mutate({ cadence }) -- cadence must be a string\"), Promise.resolve(e.config.get(\"accessNode.api\")).then(function (e) {\n              f(e, 'Required value for \"accessNode.api\" not defined in config. See: https://github.com/onflow/flow-js-sdk/blob/master/packages/fcl/src/exec/query.md#configuration');\n            });\n          } catch (e) {\n            return Promise.reject(e);\n          }\n        }(t)).then(function () {\n          return Promise.resolve(e.config().get(\"fcl.authz\", Qe().authorization)).then(function (r) {\n            return e.send([e.transaction(t.cadence), e.args(T(t.args || [])), t.limit && j(t.limit) && e.limit(t.limit), e.proposer(t.proposer || t.authz || r), e.payer(t.payer || t.authz || r), e.authorizations(t.authorizations || [t.authz || r])]).then(e.decode);\n          });\n        });\n      } catch (e) {\n        return n(e);\n      }\n\n      return o && o.then ? o.then(void 0, n) : o;\n    }(0, function (e) {\n      throw e;\n    }));\n  } catch (e) {\n    return Promise.reject(e);\n  }\n},\n    dt = function (e, r) {\n  void 0 === e && (e = []), void 0 === r && (r = {});\n\n  try {\n    return Promise.resolve(t.first([\"sdk.resolve\"], r.resolve || i)).then(function (t) {\n      function r() {\n        return Promise.resolve(t(e)).then(function (e) {\n          return JSON.stringify(s(e), null, 2);\n        });\n      }\n\n      var n = function () {\n        if (Array.isArray(e)) return Promise.resolve(c(u(), e)).then(function (t) {\n          e = t;\n        });\n      }();\n\n      return n && n.then ? n.then(r) : r();\n    });\n  } catch (e) {\n    return Promise.reject(e);\n  }\n},\n    lt = function (e) {\n  try {\n    var r = setTimeout;\n    return Promise.resolve(t().get(\"fcl.eventPollRate\", 1e4)).then(function (t) {\n      return r(function () {\n        return e.sendSelf(\"TICK\");\n      }, t);\n    });\n  } catch (e) {\n    return Promise.reject(e);\n  }\n},\n    ft = ((ct = {}).TICK = function (e) {\n  try {\n    if (!e.hasSubs()) return Promise.resolve();\n\n    var t = e.get(\"hwm\"),\n        r = function () {\n      if (null == t) {\n        var r = e.put;\n        return Promise.resolve(d()).then(function (t) {\n          r.call(e, \"hwm\", t);\n          var n = e.put;\n          return Promise.resolve(lt(e)).then(function (t) {\n            n.call(e, \"tick\", t);\n          });\n        });\n      }\n\n      return Promise.resolve(d()).then(function (r) {\n        return e.put(\"hwm\", r), Promise.resolve(n([getEvents(e.self(), t.height, r.height - 1)]).then(a)).then(function (t) {\n          for (var r, n = M(t); !(r = n()).done;) e.broadcast(\"UPDATED\", r.value.data);\n\n          var o = e.put;\n          return Promise.resolve(lt(e)).then(function (t) {\n            o.call(e, \"tick\", t);\n          });\n        });\n      });\n    }();\n\n    return Promise.resolve(r && r.then ? r.then(function () {}) : void 0);\n  } catch (e) {\n    return Promise.reject(e);\n  }\n}, ct[v] = function (e, t) {\n  try {\n    var r = function () {\n      e.subscribe(t.from);\n    },\n        n = function () {\n      if (!e.hasSubs()) {\n        var t = e.put;\n        return Promise.resolve(lt(e)).then(function (r) {\n          t.call(e, \"tick\", r);\n        });\n      }\n    }();\n\n    return Promise.resolve(n && n.then ? n.then(r) : r());\n  } catch (e) {\n    return Promise.reject(e);\n  }\n}, ct[m] = function (e, t) {\n  e.unsubscribe(t.from), e.hasSubs() || (clearTimeout(e.get(\"tick\")), e.delete(\"tick\"), e.delete(\"hwm\"));\n}, ct),\n    pt = function (e) {\n  return y(ft, e);\n};\n\nfunction ht(e) {\n  return {\n    subscribe: function (t) {\n      return C(e, pt, t);\n    }\n  };\n}\n\nvar vt = function (e, t) {\n  void 0 === t && (t = {}), window.location !== window.parent.location ? window.parent.postMessage(V({}, t, {\n    type: e\n  }), \"*\") : window.opener.postMessage(V({}, t, {\n    type: e\n  }), \"*\");\n},\n    mt = {\n  __proto__: null,\n  sendMsgToFCL: vt,\n  close: function () {\n    vt(\"FCL:VIEW:CLOSE\");\n  },\n  approve: function (e) {\n    vt(\"FCL:VIEW:RESPONSE\", {\n      f_type: \"PollingResponse\",\n      f_vsn: \"1.0.0\",\n      status: \"APPROVED\",\n      reason: null,\n      data: e\n    });\n  },\n  decline: function (e) {\n    vt(\"FCL:VIEW:RESPONSE\", {\n      f_type: \"PollingResponse\",\n      f_vsn: \"1.0.0\",\n      status: \"DECLINED\",\n      reason: e,\n      data: null\n    });\n  },\n  onMessageFromFCL: function (e, t) {\n    void 0 === t && (t = function () {});\n\n    var r = function (r) {\n      var n = r.data;\n      \"object\" == typeof n && null != typeof n && n.type === e && t(function (e) {\n        var t;\n        return e.deprecated && console.warn(\"DEPRECATION NOTICE\", e.deprecated.message), null == e || null == (t = e.body) || delete t.interaction, e;\n      }(n));\n    };\n\n    return window.addEventListener(\"message\", r), function () {\n      return window.removeEventListener(\"message\", r);\n    };\n  },\n  encodeMessageFromSignable: l,\n  CompositeSignature: function (e, t, r) {\n    this.f_type = Y.f_type, this.f_vsn = Y.f_vsn, this.addr = S(e), this.keyId = Number(t), this.signature = r;\n  }\n},\n    yt = function () {\n  return Qe().authenticate();\n},\n    Et = function () {\n  return Qe().unauthenticate();\n},\n    gt = function () {\n  return Qe().unauthenticate(), Qe().authenticate();\n},\n    Pt = function () {\n  return Qe().authenticate();\n},\n    Ct = function () {\n  return Qe().authenticate();\n},\n    Rt = Qe().authorization,\n    St = p;\n\nexport { I as VERSION, mt as WalletUtils, yt as authenticate, Rt as authz, Qe as currentUser, ht as events, Ct as logIn, ut as mutate, _ as query, gt as reauthenticate, dt as serialize, Pt as signUp, St as t, st as tx, Et as unauthenticate, Fe as verifyUserSignatures };","map":{"version":3,"mappings":"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","names":["configLens","regex","config","where","Object","fromEntries","entries","map","value","replace","discovery.wallet.method.default","fcl.storage.default","can","get","key","JSON","parse","sessionStorage","getItem","put","setItem","stringify","VERSION","is","type","d","isRequired","isObject","isString","isFunc","isNumber","normalizeArgs","ax","sdk","arg","t","query","opts","invariant","cadence","Promise","then","preQuery","send","script","args","limit","decode","r","done","SERVICE_PRAGMA","f_type","f_vsn","IDENTITY_PRAGMA","USER_PRAGMA","POLLING_RESPONSE_PRAGMA","COMPOSITE_SIGNATURE_PRAGMA","normalizeFrame","service","old","endpoint","params","data","normalizeBackChannelRpc","method","normalizeLocalView","resp","serviceNormalizers","back-channel-rpc","pre-authz","uid","id","identity","address","withPrefix","addr","keyId","authz","authn","pid","provider","name","icon","frame","open-id","user-signature","Error","local-view","deriveCompositeId","rlp","encode","toString","serviceOfType","services","find","serviceEndpoint","url","URL","searchParams","append","window","location","origin","fetchService","body","undefined","fetch","headers","Content-Type","json","normalizePollingResponse","status","reason","compositeSignature","updates","authorizationUpdates","local","poll","canContinue","serviceMethod","setTimeout","OPTIONS","HTTP/GET","HTTP/POST","FRAME","renderFrame","src","document","getElementById","$frame","createElement","allow","frameBorder","style","cssText","contentWindow","remove","popup","previousUrl","popupWindow","windowName","win","w","h","open","top","outerHeight","screenY","outerWidth","screenX","renderPop","_popup","closed","focus","timer","setInterval","clearInterval","close","tab","renderTab","_tab","VIEWS","VIEW/IFRAME","VIEW/POP","VIEW/TAB","execHttpPost","signable","error","console","execLocal","unmount","serviceResponse","noop","_","e","toLowerCase","deprecate","was","want","warn","IGNORE","Set","execService","msg","o","STRATEGIES","HTTP/RPC","IFRAME/RPC","resolve","reject","includeOlderJsonRpcCall","onClose","onMessage","onReady","onResponse","addEventListener","internal","has","removeEventListener","postMessage","recover","result","app","deprecated","message","jsonrpc","POP/RPC","$pop","pop","TAB/RPC","$tab","verifyUserSignatures","compSigs","test","Array","isArray","weights","signAlgos","signatures","all","cs","signature","account","push","keys","weight","toFixed","signAlgo","publicKey","err","rawPubKeys","VERIFY_SIG_SCRIPT","String","UFix64","UInt","normalizeCompositeSignature","sansPrefix","sig","pact","state","s","_settle","bind","v","observer","verify","signUserMessage","spawnCurrentUser","authenticate","user","signingService","Me","makeSignable","response","authorization","preAuthz","tempId","preSignable","resolvePreAuthz","sequenceNum","signingFunction","_e","_Pact","prototype","onFulfilled","onRejected","this","callback","_this","_isSettledPact","thenable","snapshot","loggedIn","notExpired","first","discoveryWallet","finalizer","paddr","normalizeData","servicesURL","code","authorizations","fetchServices","hks","sx1","sx2","normalizeService","findService","cid","expiresAt","exp","buildUser","NAME","SET_CURRENT_USER","_catch","UPDATED","DATA","HANDLERS","INIT","ctx","merge","storage","fallback","stored","removeItem","getStoredUser","fe","SUBSCRIBE","letter","subscribe","from","UNSUBSCRIBE","unsubscribe","SNAPSHOT","reply","broadcast","spawn","Date","now","unauthenticate","proposer","payer","normalizePreAuthzResponse","axs","n","a","role","az","join","authorizer","EXIT","self","update","stage","shouldContinue","_resumeAfterTest","_resumeAfterBody","updateValue","receive","tag","_exit2","expectReply","timeout","currentUser","fetchTxStatus","transactionId","fclSend","getTransactionStatus","isSealed","tx","isExecuted","isFinalized","sendSelf","$e","cur","next","scoped","spawnTransaction","transaction","subscriber","once","predicate","suppress","unsub","txStatus","statusCode","errorMessage","snapshoter","onceFinalized","onceExecuted","onceSealed","isUnknown","isPending","isExpired","mutate","prepMutation","serialize","defaultResolve","resolveFunction","createSignableVoucher","pipe","interaction","scheduleTick","TICK","hasSubs","hwm","latestBlock","_put4","_put2","getEvents","height","_put3","ct","_put6","clearTimeout","spawnEvents","events","sendMsgToFCL","parent","opener","mt","__proto__","approve","onMessageFromFCL","messageType","cb","buildData","Number","reauthenticate","signUp","logIn","types"],"sources":["../src/config-utils.js","../src/default-config.js","../src/VERSION.js","../src/exec/utils/is.js","../src/exec/utils/normalize-args.js","../src/exec/query.js","../src/current-user/normalize/__vsn.js","../src/current-user/normalize/frame.js","../src/current-user/normalize/back-channel-rpc.js","../src/current-user/normalize/local-view.js","../src/current-user/normalize/service.js","../src/current-user/normalize/pre-authz.js","../src/current-user/normalize/authz.js","../src/current-user/normalize/authn.js","../src/current-user/normalize/open-id.js","../src/current-user/normalize/user-signature.js","../src/current-user/build-user.js","../src/current-user/service-of-type.js","../src/current-user/exec-service/strategies/utils/service-endpoint.js","../src/current-user/exec-service/strategies/utils/fetch-service.js","../src/current-user/normalize/polling-response.js","../src/current-user/exec-service/strategies/utils/poll.js","../src/current-user/exec-service/strategies/utils/render-frame.js","../src/current-user/exec-service/strategies/utils/render-pop.js","../src/current-user/exec-service/strategies/utils/render-tab.js","../src/current-user/exec-service/exec-local.js","../src/current-user/exec-service/strategies/http-post.js","../src/current-user/exec-service/strategies/utils/frame.js","../src/current-user/exec-service/strategies/utils/pop.js","../src/current-user/exec-service/strategies/utils/tab.js","../src/current-user/exec-service/index.js","../src/current-user/exec-service/strategies/iframe-rpc.js","../src/current-user/exec-service/strategies/pop-rpc.js","../src/current-user/exec-service/strategies/tab-rpc.js","../src/exec/verify.js","../src/current-user/normalize/composite-signature.js","../src/current-user/index.js","../src/current-user/fetch-services.js","../src/current-user/merge-services.js","../src/transaction/index.js","../src/exec/mutate.js","../src/serialize/index.js","../src/events/index.js","../src/wallet-utils/send-msg-to-fcl.js","../src/wallet-utils/on-message-from-fcl.js","../src/wallet-utils/CompositeSignature.js","../src/fcl.js"],"sourcesContent":["import {config} from \"@onflow/sdk\"\n\nexport async function configLens(regex) {\n  return Object.fromEntries(\n    Object.entries(await config().where(regex)).map(([key, value]) => [\n      key.replace(regex, \"\"),\n      value,\n    ])\n  )\n}\n\nexport const SESSION_STORAGE = {\n  can: true,\n  get: async key => JSON.parse(sessionStorage.getItem(key)),\n  put: async (key, value) => sessionStorage.setItem(key, JSON.stringify(value)),\n}\n\nexport const LOCAL_STORAGE = {\n  can: true,\n  get: async key => JSON.parse(localStorage.getItem(key)),\n  put: async (key, value) => localStorage.setItem(key, JSON.stringify(value)),\n}\n\nexport const NO_STORAGE = {\n  can: false,\n}\n","import {config} from \"@onflow/sdk\"\nimport {SESSION_STORAGE} from \"./config-utils\"\n\nconfig({\n  \"discovery.wallet.method.default\": \"IFRAME/RPC\",\n  \"fcl.storage.default\": SESSION_STORAGE,\n})\n","export const VERSION = \"0.0.77\"\n","const is = type => d => typeof d === type\n\nexport const isRequired = d => d != null\nexport const isObject = is(\"object\")\nexport const isString = is(\"string\")\nexport const isFunc = is(\"function\")\nexport const isNumber = is(\"number\")\n","import {isFunc} from \"./is\"\nimport * as sdk from \"@onflow/sdk\"\nimport * as t from \"@onflow/types\"\n\nexport function normalizeArgs(ax) {\n  if (isFunc(ax)) return ax(sdk.arg, t)\n  return []\n}\n","import {invariant} from \"@onflow/util-invariant\"\nimport * as sdk from \"@onflow/sdk\"\nimport * as t from \"@onflow/types\"\nimport {isRequired, isObject, isString, isFunc} from \"./utils/is\"\nimport {normalizeArgs} from \"./utils/normalize-args\"\n\n/** Query the Flow Blockchain\n *\n *  @arg {Object} opts         - Query Options and configuration\n *  @arg {string} opts.cadence - Cadence Script used to query Flow\n *  @arg {ArgsFn} opts.args    - Arguments passed to cadence script\n *  @arg {number} opts.limit   - Compute Limit for Query\n *  @returns {Promise<Response>}\n *\n *  Where:\n *    @callback ArgsFn\n *    @arg {ArgFn}  arg - Argument function to define a single argument\n *    @arg {Object} t   - Cadence Types object used to define the type\n *    @returns {args[]}\n *\n *    @callback ArgFn\n *    @arg {Any}  value - the value of the argument\n *    @arg {Type} type  - the cadence type of the value\n *    @returns {arg}\n *\n *  Example:\n *    const cadence = `\n *      cadence: `\n *        pub fun main(a: Int, b: Int, c: Address): Int {\n *          log(c)\n *          return a + b\n *        }\n *    `.trim()\n *\n *    const args = (arg, t) => [\n *      arg(5, t.Int),\n *      arg(7, t.Int),\n *      arg(\"0xb2db43ad6bc345fec9\", t.Address),\n *    ]\n *\n *    await query({ cadence, args })\n */\nexport async function query(opts = {}) {\n  await preQuery(opts)\n\n  // prettier-ignore\n  return sdk.send([\n    sdk.script(opts.cadence),\n    sdk.args(normalizeArgs(opts.args || [])),\n    opts.limit && typeof opts.limit === \"number\" && sdk.limit(opts.limit)\n  ]).then(sdk.decode)\n}\n\nasync function preQuery(opts) {\n  invariant(\n    isRequired(opts.cadence),\n    \"query({ cadence }) -- cadence is required\"\n  )\n\n  invariant(\n    isString(opts.cadence),\n    \"query({ cadence }) -- cadence must be a string\"\n  )\n\n  invariant(\n    await sdk.config.get(\"accessNode.api\"),\n    `Required value for \"accessNode.api\" not defined in config. See: ${\"https://github.com/onflow/flow-js-sdk/blob/master/packages/fcl/src/exec/query.md#configuration\"}`\n  )\n}\n","export const SERVICE_PRAGMA = {\n  f_type: \"Service\",\n  f_vsn: \"1.0.0\",\n}\n\nexport const IDENTITY_PRAGMA = {\n  f_type: \"Identity\",\n  f_vsn: \"1.0.0\",\n}\n\nexport const PROVIDER_PRAGMA = {\n  f_type: \"Provider\",\n  f_vsn: \"1.0.0\",\n}\n\nexport const USER_PRAGMA = {\n  f_type: \"USER\",\n  f_vsn: \"1.0.0\",\n}\n\nexport const POLLING_RESPONSE_PRAGMA = {\n  f_type: \"PollingResponse\",\n  f_vsn: \"1.0.0\",\n}\n\nexport const COMPOSITE_SIGNATURE_PRAGMA = {\n  f_type: \"CompositeSignature\",\n  f_vsn: \"1.0.0\",\n}\n\nexport const OPEN_ID_PRAGMA = {\n  f_type: \"OpenId\",\n  f_vsn: \"1.0.0\",\n}\n","import {SERVICE_PRAGMA} from \"./__vsn\"\n\n// {\n//    \"f_type\": \"Service\",\n//    \"f_vsn\": \"1.0.0\",\n//    \"type\": \"frame\",\n//    \"endpoint\": \"https://rawr\",\n//    \"data\": {},   // Sent to frame when ready\n//    \"params\": {}, // include in query params on frame\n// }\nexport function normalizeFrame(service) {\n  if (service == null) return null\n\n  switch (service[\"f_vsn\"]) {\n    case \"1.0.0\":\n      return service\n\n    default:\n      return {\n        old: service,\n        ...SERVICE_PRAGMA,\n        type: \"frame\",\n        endpoint: service.endpoint,\n        params: service.params || {},\n        data: service.data || {},\n      }\n  }\n}\n","import {SERVICE_PRAGMA} from \"./__vsn\"\n\n// {\n//    \"f_type\": \"Service\",\n//    \"f_vsn\": \"1.0.0\",\n//    \"type\": \"back-channel-rpc\",\n//    \"endpoint\": \"https://rawr\",\n//    \"method\": \"HTTP/GET\", // HTTP/GET | HTTP/POST\n//    \"data\": {},           // included in body of rpc\n//    \"params\": {},         // included as query params on endpoint url\n// }\nexport function normalizeBackChannelRpc(service) {\n  if (service == null) return null\n\n  switch (service[\"f_vsn\"]) {\n    case \"1.0.0\":\n      return service\n\n    default:\n      return {\n        ...SERVICE_PRAGMA,\n        type: \"back-channel-rpc\",\n        endpoint: service.endpoint,\n        method: service.method,\n        params: service.params || {},\n        data: service.data || {},\n      }\n  }\n}\n","import {SERVICE_PRAGMA} from \"./__vsn\"\n\n// {\n//    \"f_type\": \"Service\",\n//    \"f_vsn\": \"1.0.0\",\n//    type: \"local-view\",\n//    method: \"VIEW/IFRAME\",\n//    endpoint: \"https://woot.org/authz/local\",\n//    data: {},\n//    params: {},\n// }\nexport function normalizeLocalView(resp) {\n  if (resp == null) return null\n  if (resp.method == null) {\n    resp = {...resp, type: \"local-view\", method: \"VIEW/IFRAME\"}\n  }\n\n  switch (resp[\"f_vsn\"]) {\n    case \"1.0.0\":\n      return resp\n\n    default:\n      return {\n        ...SERVICE_PRAGMA,\n        type: resp.type || \"local-view\",\n        method: resp.method,\n        endpoint: resp.endpoint,\n        data: resp.data || {},\n        params: resp.params || {},\n      }\n  }\n}\n","import {normalizeAuthn} from \"./authn\"\nimport {normalizeAuthz} from \"./authz\"\nimport {normalizePreAuthz} from \"./pre-authz\"\nimport {normalizeFrame} from \"./frame\"\nimport {normalizeBackChannelRpc} from \"./back-channel-rpc\"\nimport {normalizeOpenId} from \"./open-id\"\nimport {normalizeUserSignature} from \"./user-signature\"\nimport {normalizeLocalView} from \"./local-view\"\n\nexport function normalizeServices(services, data) {\n  return services.map(service => normalizeService(service, data))\n}\n\nconst serviceNormalizers = {\n  \"back-channel-rpc\": normalizeBackChannelRpc,\n  \"pre-authz\": normalizePreAuthz,\n  authz: normalizeAuthz,\n  authn: normalizeAuthn,\n  frame: normalizeFrame,\n  \"open-id\": normalizeOpenId,\n  \"user-signature\": normalizeUserSignature,\n  \"local-view\": normalizeLocalView,\n}\n\nexport function normalizeService(service, data) {\n  try {\n    var normalized = serviceNormalizers[service.type](service, data)\n    return normalized\n  } catch (error) {\n    console.error(\n      `Unrecognized FCL Service Type [${service.type}]`,\n      service,\n      error\n    )\n    return service\n  }\n}\n","import {withPrefix} from \"@onflow/util-address\"\nimport {SERVICE_PRAGMA, IDENTITY_PRAGMA} from \"./__vsn\"\n\n// {\n//   \"f_type\": \"service\",\n//   \"f_vsn\": \"1.0.0\",\n//   \"type\": \"pre-authz\",\n//   \"uid\": \"uniqueDedupeKey\",\n//   \"endpoint\": \"https://rawr\",\n//   \"method\": \"HTTP/POST\", // HTTP/POST | IFRAME/RPC | HTTP/RPC\n//   \"identity\": {\n//      \"address\": \"0x______\",\n//      \"keyId\": 0,\n//   },\n//   \"data\": {}, // included in body of pre-authz request\n//   \"params\": {}, // included as query params on endpoint url\n// }\nexport function normalizePreAuthz(service) {\n  if (service == null) return null\n\n  switch (service[\"f_vsn\"]) {\n    case \"1.0.0\":\n      return service\n\n    default:\n      return {\n        ...SERVICE_PRAGMA,\n        type: service.type,\n        uid: service.id,\n        endpoint: service.endpoint,\n        method: service.method,\n        identity: {\n          ...IDENTITY_PRAGMA,\n          address: withPrefix(service.addr),\n          keyId: service.keyId,\n        },\n        params: service.params,\n        data: service.data,\n      }\n  }\n}\n","import {withPrefix} from \"@onflow/util-address\"\nimport {SERVICE_PRAGMA, IDENTITY_PRAGMA} from \"./__vsn\"\n\n// {\n//   \"f_type\": \"service\",\n//   \"f_vsn\": \"1.0.0\",\n//   \"type\": \"authz\",\n//   \"uid\": \"uniqueDedupeKey\",\n//   \"endpoint\": \"https://rawr\",\n//   \"method\": \"HTTP/POST\", // HTTP/POST | IFRAME/RPC | HTTP/RPC\n//   \"identity\": {\n//      \"address\": \"0x______\",\n//      \"keyId\": 0,\n//   },\n//   \"data\": {}, // included in body of authz request\n//   \"params\": {}, // included as query params on endpoint url\n// }\nexport function normalizeAuthz(service) {\n  if (service == null) return null\n\n  switch (service[\"f_vsn\"]) {\n    case \"1.0.0\":\n      return service\n\n    default:\n      return {\n        ...SERVICE_PRAGMA,\n        type: service.type,\n        uid: service.id,\n        endpoint: service.endpoint,\n        method: service.method,\n        identity: {\n          ...IDENTITY_PRAGMA,\n          address: withPrefix(service.addr),\n          keyId: service.keyId,\n        },\n        params: service.params,\n        data: service.data,\n      }\n  }\n}\n","import {withPrefix} from \"@onflow/util-address\"\nimport {SERVICE_PRAGMA} from \"./__vsn\"\n\n// {\n//   \"f_type\": \"Service\",\n//   \"f_vsn\": \"1.0.0\",\n//   \"type\": \"authn\",\n//   \"uid\": \"uniqueDedupeKey\",\n//   \"endpoint\": \"https://rawr\",\n//   \"id\": \"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\", // wallets internal id for the user\n//   \"identity\": {\n//     \"address\": \"0x____\"\n//   },\n//   \"provider\": {\n//     \"address\": \"0x____\",\n//     \"name\": \"Best Wallet\",\n//     \"description\": \"The Best Wallet\"\n//     \"icon\": \"https://\",\n//   }\n// }\nexport function normalizeAuthn(service) {\n  if (service == null) return null\n\n  switch (service[\"f_vsn\"]) {\n    case \"1.0.0\":\n      return service\n\n    default:\n      return {\n        ...SERVICE_PRAGMA,\n        type: service.type,\n        uid: service.id,\n        endpoint: service.authn,\n        id: service.pid,\n        provider: {\n          address: withPrefix(service.addr),\n          name: service.name,\n          icon: service.icon,\n        },\n      }\n  }\n}\n","import {SERVICE_PRAGMA, OPEN_ID_PRAGMA} from \"./__vsn\"\n\n// {\n//   \"f_type\": \"Service\",\n//   \"f_vsn\": \"1.0.0\",\n//   \"type\": \"open-id\",\n//   \"uid\": \"uniqueDedupeKey\",\n//   \"method: \"data\",\n//   \"data\": {\n//      \"profile\": {\n//        \"name\": \"Bob\",\n//        \"family_name\": \"Builder\",\n//        \"given_name\": \"Robert\",\n//        \"middle_name\": \"the\",\n//        \"nickname\": \"Bob the Builder\",\n//        \"perferred_username\": \"bob\",\n//        \"profile\": \"https://www.bobthebuilder.com/\",\n//        \"picture\": \"https://avatars.onflow.org/avatar/bob\",\n//        \"gender\": \"...\",\n//        \"birthday\": \"2001-01-18\",\n//        \"zoneinfo\": \"America/Vancouver\",\n//        \"locale\": \"en-us\",\n//        \"updated_at\": \"1614970797388\"\n//      },\n//      \"email\": {\n//        \"email\": \"bob@bob.bob\",\n//        \"email_verified\": true\n//      },\n//      \"address\": {\n//        \"address\": \"One Apple Park Way, Cupertino, CA 95014, USA\"\n//      },\n//      \"phone\": {\n//        \"phone_number\": \"+1 (xxx) yyy-zzzz\",\n//        \"phone_number_verified\": true\n//      },\n//      \"social\": {\n//        \"twitter\": \"@_qvvg\",\n//        \"twitter_verified\": true\n//      },\n//   }\n// }\nexport function normalizeOpenId(service) {\n  if (service == null) return null\n\n  switch (service[\"f_vsn\"]) {\n    case \"1.0.0\":\n      return service\n\n    default:\n      return null\n  }\n}\n","// {\n//   \"f_type\": \"Service\",\n//   \"f_vsn\": \"1.0.0\",\n//   \"type\": \"user-signature\",\n//   \"uid\": \"uniqueDedupeKey\",\n//   \"endpoint\": \"https://rawr\",\n//   \"method\": \"IFRAME/RPC\", // HTTP/POST | IFRAME/RPC | HTTP/RPC\n//   \"id\": \"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\", // wallets internal id for the user\n//   \"data\": {}, // included in body of user-signature request\n//   \"params\": {}, // included as query params on endpoint url\n// }\nexport function normalizeUserSignature(service) {\n  if (service == null) return null\n\n  switch (service[\"f_vsn\"]) {\n    case \"1.0.0\":\n      return service\n\n    default:\n      throw new Error(\"Invalid user-signature service\")\n  }\n}\n","import {withPrefix} from \"@onflow/util-address\"\nimport * as rlp from \"@onflow/rlp\"\nimport {fetchServices} from \"./fetch-services\"\nimport {mergeServices} from \"./merge-services\"\nimport {USER_PRAGMA} from \"./normalize/__vsn\"\nimport {normalizeService} from \"./normalize/service\"\n\nfunction deriveCompositeId(authn) {\n  return rlp\n    .encode([\n      authn.provider.address || authn.provider.name || \"UNSPECIFIED\",\n      authn.id,\n    ])\n    .toString(\"hex\")\n}\n\nfunction normalizeData(data) {\n  data.addr = data.addr ? withPrefix(data.addr) : null\n  data.paddr = data.paddr ? withPrefix(data.paddr) : null\n  return data\n}\n\nfunction findService(type, services) {\n  return services.find(d => d.type === type)\n}\n\nexport async function buildUser(data) {\n  data = normalizeData(data)\n\n  var services = mergeServices(\n    data.services || [],\n    await fetchServices(data.hks, data.code)\n  ).map(service => normalizeService(service, data))\n\n  const authn = findService(\"authn\", services)\n\n  return {\n    ...USER_PRAGMA,\n    addr: withPrefix(data.addr),\n    cid: deriveCompositeId(authn),\n    loggedIn: true,\n    services: services,\n    expiresAt: data.exp,\n  }\n}\n","export function serviceOfType(services = [], type) {\n  return services.find(service => service.type === type)\n}\n","export function serviceEndpoint(service) {\n  const url = new URL(service.endpoint)\n  url.searchParams.append(\"l6n\", window.location.origin)\n  if (service.params != null) {\n    for (let [key, value] of Object.entries(service.params || {})) {\n      url.searchParams.append(key, value)\n    }\n  }\n  return url\n}\n","import {serviceEndpoint} from \"./service-endpoint\"\n\nexport function fetchService(service, opts = {}) {\n  const method = opts.method || \"POST\"\n  const body =\n    method === \"GET\"\n      ? undefined\n      : JSON.stringify(opts.data || service.data || {})\n\n  return fetch(serviceEndpoint(service), {\n    method: method,\n    headers: {\n      ...(service.headers || {}),\n      ...(opts.headers || {}),\n      \"Content-Type\": \"application/json\",\n    },\n    body: body,\n  }).then((d) => d.json())\n}\n","import {POLLING_RESPONSE_PRAGMA} from \"./__vsn\"\nimport {normalizeBackChannelRpc} from \"./back-channel-rpc\"\nimport {normalizeFrame} from \"./frame\"\n\n// {\n//    \"f_type\": \"PollingResponse\",\n//    \"f_vsn\": \"1.0.0\",\n//    \"status\": \"PENDING\", // PENDING | APPROVED | DECLINED\n//    \"reason\": null,      // Reason for Declining Transaction\n//    \"data\": null,        // Return value for APPROVED\n//    \"updates\": BackChannelRpc,\n//    \"local\": Frame,\n// }\nexport function normalizePollingResponse(resp) {\n  if (resp == null) return null\n  if (!!resp.addr || !!resp.services) {\n    resp = {status: \"APPROVED\", data: {...resp}}\n  }\n\n  switch (resp[\"f_vsn\"]) {\n    case \"1.0.0\":\n      return resp\n\n    default:\n      return {\n        ...POLLING_RESPONSE_PRAGMA,\n        status: resp.status,\n        reason: resp.reason ?? null,\n        data: resp.compositeSignature || resp.data || {},\n        updates: normalizeBackChannelRpc(resp.authorizationUpdates),\n        local: normalizeFrame((resp.local || [])[0]),\n      }\n  }\n}\n","import {normalizePollingResponse} from \"../../../normalize/polling-response\"\nimport {serviceEndpoint} from \"./service-endpoint\"\nimport {invariant} from \"@onflow/util-invariant\"\nimport {fetchService} from \"./fetch-service\"\n\nconst OPTIONS = {\n  \"HTTP/GET\": \"GET\",\n  \"HTTP/POST\": \"POST\",\n}\n\nconst serviceMethod = service => {\n  invariant(\n    OPTIONS[service.method],\n    \"Invalid Service Method for type back-channel-rpc\",\n    {service}\n  )\n  return OPTIONS[service.method]\n}\n\nconst serviceBody = service => {\n  if (service.method === \"HTTP/GET\") return undefined\n  if (service.method === \"HTTP/POST\" && service.data != null)\n    return JSON.stringify(service.data)\n  return undefined\n}\n\nexport async function poll(service, canContinue = () => true) {\n  invariant(service, \"Missing Polling Service\", {service})\n  if (!canContinue()) throw new Error(\"Externally Halted\")\n\n  const resp = await fetchService(service, {\n    method: serviceMethod(service),\n  }).then(normalizePollingResponse)\n\n  switch (resp.status) {\n    case \"APPROVED\":\n      return resp.data\n    case \"DECLINED\":\n      throw new Error(`Declined: ${resp.reason || \"No reason supplied.\"}`)\n    default:\n      await new Promise(r => setTimeout(r, 500))\n      return poll(resp.updates, canContinue)\n  }\n}\n","import {invariant} from \"@onflow/util-invariant\"\n\nconst FRAME = \"FCL_IFRAME\"\n\nconst FRAME_STYLES = `\n  position:fixed;\n  top: 0px;\n  right: 0px;\n  bottom: 0px;\n  left: 0px;\n  height: 100vh;\n  width: 100vw;\n  display:block;\n  background:rgba(0,0,0,0.25);\n  z-index: 2147483647;\n  box-sizing: border-box;\n`\n\nexport function renderFrame(src) {\n  invariant(\n    !document.getElementById(FRAME),\n    \"Attempt at triggering multiple Frames\",\n    {src}\n  )\n\n  const $frame = document.createElement(\"iframe\")\n  $frame.src = src\n  $frame.id = FRAME\n  $frame.allow = \"usb *; hid *\"\n  $frame.frameBorder = \"0\"\n  $frame.style.cssText = FRAME_STYLES\n  document.body.append($frame)\n\n  const unmount = () => {\n    if (document.getElementById(FRAME)) {\n      document.getElementById(FRAME).remove()\n    }\n  }\n\n  return [$frame.contentWindow, unmount]\n}\n","const POP = \"FCL_POP\"\n\nlet popup = null\nlet previousUrl = null\n\nfunction popupWindow(url, windowName, win, w, h) {\n  const y = win.top.outerHeight / 2 + win.top.screenY - h / 2\n  const x = win.top.outerWidth / 2 + win.top.screenX - w / 2\n  return win.open(\n    url,\n    windowName,\n    `toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width=${w}, height=${h}, top=${y}, left=${x}`\n  )\n}\n\nexport function renderPop(src) {\n  if (popup == null || popup?.closed) {\n    popup = popupWindow(src, POP, window, 640, 600)\n  } else if (previousUrl !== src) {\n    popup = popupWindow(src, POP, window, 640, 600)\n    popup.focus()\n  } else {\n    popup.focus()\n  }\n\n  previousUrl = src\n\n  var timer = setInterval(function () {\n    if (popup && popup.closed) {\n      clearInterval(timer)\n      popup = null\n    }\n  }, 1000)\n\n  const unmount = () => {\n    if (popup && !popup.closed) {\n      popup.close()\n      popup = null\n    }\n  }\n\n  return [popup, unmount]\n}\n","const TAB = \"FCL_TAB\"\n\nlet tab = null\nlet previousUrl = null\n\nexport function renderTab(src) {\n  if (tab == null || tab?.closed) {\n    tab = window.open(src, \"_blank\")\n  } else if (previousUrl !== src) {\n    tab = window.open(src, \"_blank\")\n    tab.focus()\n  } else {\n    tab.focus()\n  }\n\n  previousUrl = src\n\n  var timer = setInterval(function () {\n    if (tab && tab.closed) {\n      clearInterval(timer)\n      tab = null\n    }\n  }, 1000)\n\n  const unmount = () => {\n    if (tab && !tab.closed) {\n      tab.close()\n      tab = null\n    }\n  }\n\n  return [tab, unmount]\n}\n","import {renderFrame} from \"./strategies/utils/render-frame\"\nimport {renderPop} from \"./strategies/utils/render-pop\"\nimport {renderTab} from \"./strategies/utils/render-tab\"\nimport {serviceEndpoint} from \"./strategies/utils/service-endpoint\"\n\nconst VIEWS = {\n  \"VIEW/IFRAME\": renderFrame,\n  \"VIEW/POP\": renderPop,\n  \"VIEW/TAB\": renderTab,\n}\n\nexport async function execLocal(service, opts = {}) {\n  try {\n    return VIEWS[service.method](serviceEndpoint(service), opts)\n  } catch (error) {\n    console.error(\"execLocal({service, opts = {}})\", error, {service, opts})\n    throw error\n  }\n}\n","import {fetchService} from \"./utils/fetch-service\"\nimport {normalizePollingResponse} from \"../../normalize/polling-response\"\nimport {normalizeLocalView} from \"../../normalize/local-view\"\nimport {poll} from \"./utils/poll\"\nimport {execLocal} from \"../exec-local\"\n\nexport async function execHttpPost(service, signable, opts = {}) {\n  signable.data = service.data\n  const resp = await fetchService(service, {\n    data: signable,\n  }).then(normalizePollingResponse)\n\n  if (resp.status === \"APPROVED\") {\n    return resp.data\n  } else if (resp.status === \"DECLINED\") {\n    throw new Error(`Declined: ${resp.reason || \"No reason supplied.\"}`)\n  } else if (resp.status === \"PENDING\") {\n    var canContinue = true\n    const [_, unmount] = await execLocal(normalizeLocalView(resp.local))\n\n    const close = () => {\n      try {\n        unmount()\n        canContinue = false\n      } catch (error) {\n        console.error(\"Frame Close Error\", error)\n      }\n    }\n\n    return poll(resp.updates, () => canContinue)\n      .then(serviceResponse => {\n        close()\n        return serviceResponse\n      })\n      .catch(error => {\n        console.error(error)\n        close()\n        throw error\n      })\n  } else {\n    console.error(`Auto Decline: Invalid Response`, {service, resp})\n    throw new Error(`Auto Decline: Invalid Response`)\n  }\n}\n","import {renderFrame} from \"./render-frame\"\nimport {serviceEndpoint} from \"./service-endpoint\"\n\nconst CLOSE_EVENT = \"FCL:VIEW:CLOSE\"\nconst READY_EVENT = \"FCL:VIEW:READY\"\nconst RESPONSE_EVENT = \"FCL:VIEW:RESPONSE\"\n\nconst noop = () => {}\nconst _ = e => typeof e === \"string\" && e.toLowerCase()\nconst deprecate = (was, want) =>\n  console.warn(\n    \"DEPRECATION NOTICE\",\n    `Received ${was}, please use ${want} for this and future versions of FCL`\n  )\n\nconst IGNORE = new Set([\n  \"monetizationstart\",\n  \"monetizationpending\",\n  \"monetizationprogress\",\n  \"monetizationstop\",\n])\n\nexport function frame(service, opts = {}) {\n  if (service == null) return {send: noop, close: noop}\n\n  var tab = null\n  const onClose = opts.onClose || noop\n  const onMessage = opts.onMessage || noop\n  const onReady = opts.onReady || noop\n  const onResponse = opts.onResponse || noop\n\n  window.addEventListener(\"message\", internal)\n  const [$frame, unmount] = renderFrame(serviceEndpoint(service))\n  return {send, close}\n\n  function internal(e) {\n    try {\n      if (typeof e.data !== \"object\") return\n      if (IGNORE.has(e.data.type)) return\n      if (_(e.data.type) === _(CLOSE_EVENT)) close()\n      if (_(e.data.type) === _(READY_EVENT)) onReady(e, {send, close})\n      if (_(e.data.type) === _(RESPONSE_EVENT)) onResponse(e, {send, close})\n      onMessage(e, {send, close})\n\n      // Backwards Compatible\n      if (_(e.data.type) === _(\"FCL:FRAME:READY\")) {\n        deprecate(e.data.type, READY_EVENT)\n        onReady(e, {send, close})\n      }\n      if (_(e.data.type) === _(\"FCL:FRAME:RESPONSE\")) {\n        deprecate(e.data.type, RESPONSE_EVENT)\n        onResponse(e, {send, close})\n      }\n      if (_(e.data.type) === _(\"FCL:FRAME:CLOSE\")) {\n        deprecate(e.data.type, CLOSE_EVENT)\n        close()\n      }\n      //\n      if (_(e.data.type) === _(\"FCL::CHALLENGE::RESPONSE\")) {\n        deprecate(e.data.type, RESPONSE_EVENT)\n        onResponse(e, {send, close})\n      }\n      if (_(e.data.type) === _(\"FCL::AUTHZ_READY\")) {\n        deprecate(e.data.type, READY_EVENT)\n        onReady(e, {send, close})\n      }\n      if (_(e.data.type) === _(\"FCL::CHALLENGE::CANCEL\")) {\n        deprecate(e.data.type, CLOSE_EVENT)\n        close()\n      }\n      if (_(e.data.type) === _(\"FCL::CANCEL\")) {\n        deprecate(e.data.type, CLOSE_EVENT)\n        close()\n      }\n    } catch (error) {\n      console.error(\"Frame Callback Error\", error)\n      close()\n    }\n  }\n\n  function close() {\n    try {\n      window.removeEventListener(\"message\", internal)\n      if (tab != null) tab.close()\n      unmount()\n      onClose()\n    } catch (error) {\n      console.error(\"Frame Close Error\", error)\n    }\n  }\n\n  function send(msg) {\n    try {\n      $frame.postMessage(JSON.parse(JSON.stringify(msg || {})), \"*\")\n    } catch (error) {\n      console.error(\"Frame Send Error\", msg, error)\n    }\n  }\n}\n","import {renderPop} from \"./render-pop\"\nimport {serviceEndpoint} from \"./service-endpoint\"\n\nconst CLOSE_EVENT = \"FCL:VIEW:CLOSE\"\nconst READY_EVENT = \"FCL:VIEW:READY\"\nconst RESPONSE_EVENT = \"FCL:VIEW:RESPONSE\"\n\nconst noop = () => {}\nconst _ = e => typeof e === \"string\" && e.toLowerCase()\nconst deprecate = (was, want) =>\n  console.warn(\n    \"DEPRECATION NOTICE\",\n    `Received ${was}, please use ${want} for this and future versions of FCL`\n  )\n\nconst IGNORE = new Set([\n  \"monetizationstart\",\n  \"monetizationpending\",\n  \"monetizationprogress\",\n  \"monetizationstop\",\n])\n\nexport function pop(service, opts = {}) {\n  if (service == null) return {send: noop, close: noop}\n\n  var tab = null\n  const onClose = opts.onClose || noop\n  const onMessage = opts.onMessage || noop\n  const onReady = opts.onReady || noop\n  const onResponse = opts.onResponse || noop\n\n  window.addEventListener(\"message\", internal)\n  const [$pop, unmount] = renderPop(serviceEndpoint(service))\n  return {send, close}\n\n  function internal(e) {\n    try {\n      if (typeof e.data !== \"object\") return\n      if (IGNORE.has(e.data.type)) return\n      if (_(e.data.type) === _(CLOSE_EVENT)) close()\n      if (_(e.data.type) === _(READY_EVENT)) onReady(e, {send, close})\n      if (_(e.data.type) === _(RESPONSE_EVENT)) onResponse(e, {send, close})\n      onMessage(e, {send, close})\n\n      // Backwards Compatible\n      if (_(e.data.type) === _(\"FCL:FRAME:READY\")) {\n        deprecate(e.data.type, READY_EVENT)\n        onReady(e, {send, close})\n      }\n      if (_(e.data.type) === _(\"FCL:FRAME:RESPONSE\")) {\n        deprecate(e.data.type, RESPONSE_EVENT)\n        onResponse(e, {send, close})\n      }\n      if (_(e.data.type) === _(\"FCL:FRAME:CLOSE\")) {\n        deprecate(e.data.type, CLOSE_EVENT)\n        close()\n      }\n      //\n      if (_(e.data.type) === _(\"FCL::CHALLENGE::RESPONSE\")) {\n        deprecate(e.data.type, RESPONSE_EVENT)\n        onResponse(e, {send, close})\n      }\n      if (_(e.data.type) === _(\"FCL::AUTHZ_READY\")) {\n        deprecate(e.data.type, READY_EVENT)\n        onReady(e, {send, close})\n      }\n      if (_(e.data.type) === _(\"FCL::CHALLENGE::CANCEL\")) {\n        deprecate(e.data.type, CLOSE_EVENT)\n        close()\n      }\n      if (_(e.data.type) === _(\"FCL::CANCEL\")) {\n        deprecate(e.data.type, CLOSE_EVENT)\n        close()\n      }\n    } catch (error) {\n      console.error(\"Popup Callback Error\", error)\n      close()\n    }\n  }\n\n  function close() {\n    try {\n      window.removeEventListener(\"message\", internal)\n      if (tab != null) tab.close()\n      unmount()\n      onClose()\n    } catch (error) {\n      console.error(\"Popup Close Error\", error)\n    }\n  }\n\n  function send(msg) {\n    try {\n      $pop.postMessage(JSON.parse(JSON.stringify(msg || {})), \"*\")\n    } catch (error) {\n      console.error(\"Popup Send Error\", msg, error)\n    }\n  }\n}\n","import {renderTab} from \"./render-tab\"\nimport {serviceEndpoint} from \"./service-endpoint\"\n\nconst CLOSE_EVENT = \"FCL:VIEW:CLOSE\"\nconst READY_EVENT = \"FCL:VIEW:READY\"\nconst RESPONSE_EVENT = \"FCL:VIEW:RESPONSE\"\n\nconst noop = () => {}\nconst _ = e => typeof e === \"string\" && e.toLowerCase()\nconst deprecate = (was, want) =>\n  console.warn(\n    \"DEPRECATION NOTICE\",\n    `Received ${was}, please use ${want} for this and future versions of FCL`\n  )\n\nconst IGNORE = new Set([\n  \"monetizationstart\",\n  \"monetizationpending\",\n  \"monetizationprogress\",\n  \"monetizationstop\",\n])\n\nexport function tab(service, opts = {}) {\n  if (service == null) return {send: noop, close: noop}\n\n  var tab = null\n  const onClose = opts.onClose || noop\n  const onMessage = opts.onMessage || noop\n  const onReady = opts.onReady || noop\n  const onResponse = opts.onResponse || noop\n\n  window.addEventListener(\"message\", internal)\n  const [$tab, unmount] = renderTab(serviceEndpoint(service))\n  return {send, close}\n\n  function internal(e) {\n    try {\n      if (typeof e.data !== \"object\") return\n      if (IGNORE.has(e.data.type)) return\n      if (_(e.data.type) === _(CLOSE_EVENT)) close()\n      if (_(e.data.type) === _(READY_EVENT)) onReady(e, {send, close})\n      if (_(e.data.type) === _(RESPONSE_EVENT)) onResponse(e, {send, close})\n      onMessage(e, {send, close})\n\n      // Backwards Compatible\n      if (_(e.data.type) === _(\"FCL:FRAME:READY\")) {\n        deprecate(e.data.type, READY_EVENT)\n        onReady(e, {send, close})\n      }\n      if (_(e.data.type) === _(\"FCL:FRAME:RESPONSE\")) {\n        deprecate(e.data.type, RESPONSE_EVENT)\n        onResponse(e, {send, close})\n      }\n      if (_(e.data.type) === _(\"FCL:FRAME:CLOSE\")) {\n        deprecate(e.data.type, CLOSE_EVENT)\n        close()\n      }\n      //\n      if (_(e.data.type) === _(\"FCL::CHALLENGE::RESPONSE\")) {\n        deprecate(e.data.type, RESPONSE_EVENT)\n        onResponse(e, {send, close})\n      }\n      if (_(e.data.type) === _(\"FCL::AUTHZ_READY\")) {\n        deprecate(e.data.type, READY_EVENT)\n        onReady(e, {send, close})\n      }\n      if (_(e.data.type) === _(\"FCL::CHALLENGE::CANCEL\")) {\n        deprecate(e.data.type, CLOSE_EVENT)\n        close()\n      }\n      if (_(e.data.type) === _(\"FCL::CANCEL\")) {\n        deprecate(e.data.type, CLOSE_EVENT)\n        close()\n      }\n    } catch (error) {\n      console.error(\"Tab Callback Error\", error)\n      close()\n    }\n  }\n\n  function close() {\n    try {\n      window.removeEventListener(\"message\", internal)\n      if (tab != null) tab.close()\n      unmount()\n      onClose()\n    } catch (error) {\n      console.error(\"Tab Close Error\", error)\n    }\n  }\n\n  function send(msg) {\n    try {\n      $tab.postMessage(JSON.parse(JSON.stringify(msg || {})), \"*\")\n    } catch (error) {\n      console.error(\"Tab Send Error\", msg, error)\n    }\n  }\n}\n","import {execHttpPost} from \"./strategies/http-post\"\nimport {execIframeRPC} from \"./strategies/iframe-rpc\"\nimport {execPopRPC} from \"./strategies/pop-rpc\"\nimport {execTabRPC} from \"./strategies/tab-rpc\"\n\nconst STRATEGIES = {\n  \"HTTP/RPC\": execHttpPost,\n  \"HTTP/POST\": execHttpPost,\n  \"IFRAME/RPC\": execIframeRPC,\n  \"POP/RPC\": execPopRPC,\n  \"TAB/RPC\": execTabRPC,\n}\n\nexport async function execService({service, msg = {}, opts = {}}) {\n  try {\n    return STRATEGIES[service.method](service, msg, opts)\n  } catch (error) {\n    console.error(\"execService({service, msg = {}, opts = {}})\", error, {service, msg, opts})\n    throw error\n  }\n}","import {uid} from \"@onflow/util-uid\"\nimport {frame} from \"./utils/frame\"\nimport {normalizePollingResponse} from \"../../normalize/polling-response\"\nimport {configLens} from \"../../../config-utils\"\n\nexport function execIframeRPC(service, body, opts) {\n  return new Promise((resolve, reject) => {\n    const id = uid()\n    const includeOlderJsonRpcCall = opts.includeOlderJsonRpcCall\n\n    body.data = service.data\n\n    frame(service, {\n      async onReady(_, {send}) {\n        try {\n          send({\n            type: \"FCL:VIEW:READY:RESPONSE\",\n            body,\n            service: {\n              params: service.params,\n              data: service.data,\n            },\n            config: {\n              services: await configLens(/^service\\./),\n              app: await configLens(/^app\\.detail\\./),\n            },\n          })\n          send({\n            type: \"FCL:FRAME:READY:RESPONSE\",\n            body,\n            service: {\n              params: service.params,\n              data: service.data,\n            },\n            config: {\n              services: await configLens(/^service\\./),\n              app: await configLens(/^app\\.detail\\./),\n            },\n            deprecated: {\n              message:\n                \"FCL:FRAME:READY:RESPONSE is deprecated and replaced with type: FCL:VIEW:READY:RESPONSE\",\n            },\n          })\n          if (includeOlderJsonRpcCall) {\n            send({\n              jsonrpc: \"2.0\",\n              id: id,\n              method: \"fcl:sign\",\n              params: [body, service.params],\n              deprecated: {\n                message:\n                  \"jsonrpc is deprecated and replaced with type: FCL:VIEW:READY:RESPONSE\",\n              },\n            })\n          }\n        } catch (error) {\n          throw error\n        }\n      },\n\n      onResponse(e, {close}) {\n        try {\n          if (typeof e.data !== \"object\") return\n          const resp = normalizePollingResponse(e.data)\n\n          switch (resp.status) {\n            case \"APPROVED\":\n              resolve(resp.data)\n              close()\n              break\n\n            case \"DECLINED\":\n              reject(`Declined: ${resp.reason || \"No reason supplied\"}`)\n              close()\n              break\n\n            default:\n              reject(`Declined: No reason supplied`)\n              close()\n              break\n          }\n        } catch (error) {\n          console.error(\"execIframeRPC onResponse error\", error)\n          throw error\n        }\n      },\n\n      onMessage(e, {close}) {\n        try {\n          if (typeof e.data !== \"object\") return\n          if (e.data.jsonrpc !== \"2.0\") return\n          if (e.data.id !== id) return\n          const resp = normalizePollingResponse(e.data.result)\n\n          switch (resp.status) {\n            case \"APPROVED\":\n              resolve(resp.data)\n              close()\n              break\n\n            case \"DECLINED\":\n              reject(`Declined: ${resp.reason || \"No reason supplied\"}`)\n              close()\n              break\n\n            default:\n              reject(`Declined: No reason supplied`)\n              close()\n              break\n          }\n        } catch (error) {\n          console.error(\"execIframeRPC onMessage error\", error)\n          throw error\n        }\n      },\n\n      onClose() {\n        reject(`Declined: Externally Halted`)\n      },\n    })\n  })\n}\n","import {uid} from \"@onflow/util-uid\"\nimport {pop} from \"./utils/pop\"\nimport {normalizePollingResponse} from \"../../normalize/polling-response\"\nimport {configLens} from \"../../../config-utils\"\n\nexport function execPopRPC(service, body, opts) {\n  return new Promise((resolve, reject) => {\n    const id = uid()\n    const includeOlderJsonRpcCall = opts.includeOlderJsonRpcCall\n\n    body.data = service.data\n\n    pop(service, {\n      async onReady(_, {send}) {\n        try {\n          send({\n            type: \"FCL:VIEW:READY:RESPONSE\",\n            body,\n            service: {\n              params: service.params,\n              data: service.data,\n            },\n            config: {\n              services: await configLens(/^service\\./),\n              app: await configLens(/^app\\.detail\\./),\n            },\n          })\n          send({\n            type: \"FCL:FRAME:READY:RESPONSE\",\n            body,\n            service: {\n              params: service.params,\n              data: service.data,\n            },\n            config: {\n              services: await configLens(/^service\\./),\n              app: await configLens(/^app\\.detail\\./),\n            },\n            deprecated: {\n              message:\n                \"FCL:FRAME:READY:RESPONSE is deprecated and replaced with type: FCL:VIEW:READY:RESPONSE\",\n            },\n          })\n          if (includeOlderJsonRpcCall) {\n            send({\n              jsonrpc: \"2.0\",\n              id: id,\n              method: \"fcl:sign\",\n              params: [body, service.params],\n            })\n          }\n        } catch (error) {\n          throw error\n        }\n      },\n\n      onResponse(e, {close}) {\n        try {\n          if (typeof e.data !== \"object\") return\n          const resp = normalizePollingResponse(e.data)\n\n          switch (resp.status) {\n            case \"APPROVED\":\n              resolve(resp.data)\n              close()\n              break\n\n            case \"DECLINED\":\n              reject(`Declined: ${resp.reason || \"No reason supplied\"}`)\n              close()\n              break\n\n            default:\n              reject(`Declined: No reason supplied`)\n              close()\n              break\n          }\n        } catch (error) {\n          console.error(\"execPopRPC onResponse error\", error)\n          throw error\n        }\n      },\n\n      onMessage(e, {close}) {\n        try {\n          if (typeof e.data !== \"object\") return\n          if (e.data.jsonrpc !== \"2.0\") return\n          if (e.data.id !== id) return\n          const resp = normalizePollingResponse(e.data.result)\n\n          switch (resp.status) {\n            case \"APPROVED\":\n              resolve(resp.data)\n              close()\n              break\n\n            case \"DECLINED\":\n              reject(`Declined: ${resp.reason || \"No reason supplied\"}`)\n              close()\n              break\n\n            default:\n              reject(`Declined: No reason supplied`)\n              close()\n              break\n          }\n        } catch (error) {\n          console.error(\"execPopRPC onMessage error\", error)\n          throw error\n        }\n      },\n\n      onClose() {\n        reject(`Declined: Externally Halted`)\n      },\n    })\n  })\n}\n","import {uid} from \"@onflow/util-uid\"\nimport {tab} from \"./utils/tab\"\nimport {normalizePollingResponse} from \"../../normalize/polling-response\"\nimport {configLens} from \"../../../config-utils\"\n\nexport function execTabRPC(service, body, opts) {\n  return new Promise((resolve, reject) => {\n    const id = uid()\n    const includeOlderJsonRpcCall = opts.includeOlderJsonRpcCall\n\n    body.data = service.data\n\n    tab(service, {\n      async onReady(_, {send}) {\n        try {\n          send({\n            type: \"FCL:VIEW:READY:RESPONSE\",\n            body,\n            service: {\n              params: service.params,\n              data: service.data,\n            },\n            config: {\n              services: await configLens(/^service\\./),\n              app: await configLens(/^app\\.detail\\./),\n            },\n          })\n          send({\n            type: \"FCL:FRAME:READY:RESPONSE\",\n            body,\n            service: {\n              params: service.params,\n              data: service.data,\n            },\n            config: {\n              services: await configLens(/^service\\./),\n              app: await configLens(/^app\\.detail\\./),\n            },\n            deprecated: {\n              message:\n                \"FCL:FRAME:READY:RESPONSE is deprecated and replaced with type: FCL:VIEW:READY:RESPONSE\",\n            },\n          })\n          if (includeOlderJsonRpcCall) {\n            send({\n              jsonrpc: \"2.0\",\n              id: id,\n              method: \"fcl:sign\",\n              params: [body, service.params],\n            })\n          }\n        } catch (error) {\n          throw error\n        }\n      },\n\n      onResponse(e, {close}) {\n        try {\n          if (typeof e.data !== \"object\") return\n          const resp = normalizePollingResponse(e.data)\n\n          switch (resp.status) {\n            case \"APPROVED\":\n              resolve(resp.data)\n              close()\n              break\n\n            case \"DECLINED\":\n              reject(`Declined: ${resp.reason || \"No reason supplied\"}`)\n              close()\n              break\n\n            default:\n              reject(`Declined: No reason supplied`)\n              close()\n              break\n          }\n        } catch (error) {\n          console.error(\"execPopRPC onResponse error\", error)\n          throw error\n        }\n      },\n\n      onMessage(e, {close}) {\n        try {\n          if (typeof e.data !== \"object\") return\n          if (e.data.jsonrpc !== \"2.0\") return\n          if (e.data.id !== id) return\n          const resp = normalizePollingResponse(e.data.result)\n\n          switch (resp.status) {\n            case \"APPROVED\":\n              resolve(resp.data)\n              close()\n              break\n\n            case \"DECLINED\":\n              reject(`Declined: ${resp.reason || \"No reason supplied\"}`)\n              close()\n              break\n\n            default:\n              reject(`Declined: No reason supplied`)\n              close()\n              break\n          }\n        } catch (error) {\n          console.error(\"execPopRPC onMessage error\", error)\n          throw error\n        }\n      },\n\n      onClose() {\n        reject(`Declined: Externally Halted`)\n      },\n    })\n  })\n}\n","import {invariant} from \"@onflow/util-invariant\"\nimport {query} from \"../exec/query\"\nimport {account} from \"@onflow/sdk\"\n\nexport async function verifyUserSignatures(msg, compSigs) {\n  invariant(/^[0-9a-f]+$/i.test(msg), \"Message must be a hex string\")\n  invariant(\n    Array.isArray(compSigs),\n    \"Must include an Array of composite signatures\"\n  )\n\n  let weights = []\n  let signAlgos = []\n  let signatures = []\n  const rawPubKeys = await Promise.all(\n    compSigs.map(async cs => {\n      invariant(typeof cs.addr === \"string\", \"addr must be a string\")\n      invariant(typeof cs.keyId === \"number\", \"keyId must be a number\")\n      invariant(typeof cs.signature === \"string\", \"signature must be a string\")\n\n      try {\n        const account = await account(cs.addr)\n        weights.push(account.keys[cs.keyId].weight.toFixed(1))\n        signAlgos.push(account.keys[cs.keyId].signAlgo)\n        signatures.push(cs.signature)\n        return account.keys[cs.keyId].publicKey\n      } catch (err) {\n        throw err\n      }\n    })\n  )\n\n  return await query({\n    cadence: `${VERIFY_SIG_SCRIPT}`,\n    args: (arg, t) => [\n      arg(msg, t.String),\n      arg(rawPubKeys, t.Array([t.String])),\n      arg(weights, t.Array(t.UFix64)),\n      arg(signAlgos, t.Array([t.UInt])),\n      arg(signatures, t.Array([t.String])),\n    ],\n  })\n}\n\nconst VERIFY_SIG_SCRIPT = `\nimport Crypto\n    \npub fun main(\n  message: String,\n  rawPublicKeys: [String],\n  weights: [UFix64],\n  signAlgos: [UInt],\n  signatures: [String],\n): Bool {\n\n  let keyList = Crypto.KeyList()\n  \n  var i = 0\n  for rawPublicKey in rawPublicKeys {\n    keyList.add(\n      PublicKey(\n        publicKey: rawPublicKey.decodeHex(),\n        signatureAlgorithm: signAlgos[i] == 2 ? SignatureAlgorithm.ECDSA_P256 : SignatureAlgorithm.ECDSA_secp256k1 \n      ),\n      hashAlgorithm: HashAlgorithm.SHA3_256,\n      weight: weights[i],\n    )\n    i = i + 1\n  }\n\n  let signatureSet: [Crypto.KeyListSignature] = []\n\n  var j = 0\n  for signature in signatures {\n    signatureSet.append(\n      Crypto.KeyListSignature(\n        keyIndex: j,\n        signature: signature.decodeHex()\n      )\n    )\n    j = j + 1\n  }\n    \n  let signedData = message.decodeHex()\n  \n  return keyList.verify(\n    signatureSet: signatureSet,\n    signedData: signedData\n  )\n}\n`\n","import {COMPOSITE_SIGNATURE_PRAGMA} from \"./__vsn\"\nimport {sansPrefix} from \"@onflow/util-address\"\n\n// {\n//    \"f_type\": \"CompositeSignature\",\n//    \"f_vsn\": \"1.0.0\",\n//    \"addr\": \"_____\",         // sans-prefix\n//    \"signature\": \"adfe1234\", // hex\n//    \"keyId\": 3,\n// }\nexport function normalizeCompositeSignature(resp) {\n  if (resp == null) return null\n\n  switch (resp[\"f_vsn\"]) {\n    case \"1.0.0\":\n      return resp\n\n    default:\n      return {\n        ...COMPOSITE_SIGNATURE_PRAGMA,\n        addr: sansPrefix(resp.addr || resp.address),\n        signature: resp.signature || resp.sig,\n        keyId: resp.keyId,\n      }\n  }\n}\n","import \"../default-config\"\nimport {account, config} from \"@onflow/sdk\"\nimport {spawn, send, INIT, SUBSCRIBE, UNSUBSCRIBE} from \"@onflow/util-actor\"\nimport {sansPrefix} from \"@onflow/util-address\"\nimport {invariant} from \"@onflow/util-invariant\"\nimport {buildUser} from \"./build-user\"\nimport {serviceOfType} from \"./service-of-type\"\nimport {execService} from \"./exec-service\"\nimport {verifyUserSignatures as verify} from \"../exec/verify\"\nimport {normalizeCompositeSignature} from \"./normalize/composite-signature\"\n\nconst NAME = \"CURRENT_USER\"\nconst UPDATED = \"CURRENT_USER/UPDATED\"\nconst SNAPSHOT = \"SNAPSHOT\"\nconst SET_CURRENT_USER = \"SET_CURRENT_USER\"\nconst DEL_CURRENT_USER = \"DEL_CURRENT_USER\"\n\nconst DATA = `{\n  \"f_type\": \"User\",\n  \"f_vsn\": \"1.0.0\",\n  \"addr\":null,\n  \"cid\":null,\n  \"loggedIn\":null,\n  \"expiresAt\":null,\n  \"services\":[]\n}`\n\nconst getStoredUser = async storage => {\n  const fallback = JSON.parse(DATA)\n  const stored = await storage.get(NAME)\n  if (stored != null && fallback[\"f_vsn\"] !== stored[\"f_vsn\"]) {\n    storage.removeItem(NAME)\n    return fallback\n  }\n  return stored || fallback\n}\n\nconst HANDLERS = {\n  [INIT]: async ctx => {\n    ctx.merge(JSON.parse(DATA))\n    const storage = await config.first([\"fcl.storage\", \"fcl.storage.default\"])\n    if (storage.can) {\n      const user = await getStoredUser(storage)\n      if (notExpired(user)) ctx.merge(user)\n    }\n  },\n  [SUBSCRIBE]: (ctx, letter) => {\n    ctx.subscribe(letter.from)\n    ctx.send(letter.from, UPDATED, {...ctx.all()})\n  },\n  [UNSUBSCRIBE]: (ctx, letter) => {\n    ctx.unsubscribe(letter.from)\n  },\n  [SNAPSHOT]: async (ctx, letter) => {\n    letter.reply({...ctx.all()})\n  },\n  [SET_CURRENT_USER]: async (ctx, letter, data) => {\n    ctx.merge(data)\n    const storage = await config.first([\"fcl.storage\", \"fcl.storage.default\"])\n    if (storage.can) storage.put(NAME, ctx.all())\n    ctx.broadcast(UPDATED, {...ctx.all()})\n  },\n  [DEL_CURRENT_USER]: async (ctx, letter) => {\n    ctx.merge(JSON.parse(DATA))\n    const storage = await config.first([\"fcl.storage\", \"fcl.storage.default\"])\n    if (storage.can) storage.put(NAME, ctx.all())\n    ctx.broadcast(UPDATED, {...ctx.all()})\n  },\n}\n\nconst spawnCurrentUser = () => spawn(HANDLERS, NAME)\n\nfunction notExpired(user) {\n  return (\n    user.expiresAt == null ||\n    user.expiresAt === 0 ||\n    user.expiresAt > Date.now()\n  )\n}\n\nasync function authenticate() {\n  return new Promise(async (resolve, reject) => {\n    spawnCurrentUser()\n    const user = await snapshot()\n    if (user.loggedIn && notExpired(user)) return resolve(user)\n\n    const discoveryWallet = await config.first([\n      \"discovery.wallet\",\n      \"challenge.handshake\",\n    ])\n\n    try {\n      if (discoveryWallet == null) {\n        console.warn(\n          `Required value for \"discovery.wallet\" not defined in config. See: ${\"https://github.com/onflow/flow-js-sdk/blob/master/packages/fcl/src/exec/query.md#configuration\"}`\n        )\n        throw new Error(\n          `Required config value \"discovery.wallet\" is not defined`\n        )\n      }\n    } catch (error) {\n      console.error(error)\n    }\n\n    const method = await config.first(\n      [\"discovery.wallet.method\", \"discovery.wallet.method.default\"],\n      \"IFRAME/RPC\"\n    )\n\n    try {\n      const response = await execService({\n        service: {\n          endpoint: discoveryWallet,\n          method: method,\n        },\n      })\n      send(NAME, SET_CURRENT_USER, await buildUser(response))\n    } catch (e) {\n      console.error(\"Error while authenticating\", e)\n    } finally {\n      resolve(await snapshot())\n    }\n  })\n}\n\nfunction unauthenticate() {\n  spawnCurrentUser()\n  send(NAME, DEL_CURRENT_USER)\n}\n\nconst normalizePreAuthzResponse = authz => ({\n  f_type: \"PreAuthzResponse\",\n  f_vsn: \"1.0.0\",\n  proposer: (authz || {}).proposer,\n  payer: (authz || {}).payer || [],\n  authorization: (authz || {}).authorization || [],\n})\n\nfunction resolvePreAuthz(authz) {\n  const resp = normalizePreAuthzResponse(authz)\n  const axs = []\n\n  if (resp.proposer != null) axs.push([\"PROPOSER\", resp.proposer])\n  for (let az of resp.payer || []) axs.push([\"PAYER\", az])\n  for (let az of resp.authorization || []) axs.push([\"AUTHORIZER\", az])\n\n  var result = axs.map(([role, az]) => ({\n    tempId: [az.identity.address, az.identity.keyId].join(\"|\"),\n    addr: az.identity.address,\n    keyId: az.identity.keyId,\n    signingFunction(signable) {\n      return execService({service: az, msg: signable})\n    },\n    role: {\n      proposer: role === \"PROPOSER\",\n      payer: role === \"PAYER\",\n      authorizer: role === \"AUTHORIZER\",\n    },\n  }))\n  return result\n}\n\nasync function authorization(account) {\n  spawnCurrentUser()\n  const user = await authenticate()\n  const authz = serviceOfType(user.services, \"authz\")\n\n  const preAuthz = serviceOfType(user.services, \"pre-authz\")\n  if (preAuthz) {\n    return {\n      ...account,\n      tempId: \"CURRENT_USER\",\n      async resolve(account, preSignable) {\n        return resolvePreAuthz(\n          await execService({service: preAuthz, msg: preSignable})\n        )\n      },\n    }\n  }\n\n  return {\n    ...account,\n    tempId: \"CURRENT_USER\",\n    resolve: null,\n    addr: sansPrefix(authz.identity.address),\n    keyId: authz.identity.keyId,\n    sequenceNum: null,\n    signature: null,\n    async signingFunction(signable) {\n      return normalizeCompositeSignature(\n        await execService({\n          service: authz,\n          msg: signable,\n          opts: {\n            includeOlderJsonRpcCall: true,\n          },\n        })\n      )\n    },\n  }\n}\n\nfunction subscribe(callback) {\n  spawnCurrentUser()\n  const EXIT = \"@EXIT\"\n  const self = spawn(async ctx => {\n    ctx.send(NAME, SUBSCRIBE)\n    while (1) {\n      const letter = await ctx.receive()\n      if (letter.tag === EXIT) {\n        ctx.send(NAME, UNSUBSCRIBE)\n        return\n      }\n      callback(letter.data)\n    }\n  })\n  return () => send(self, EXIT)\n}\n\nfunction snapshot() {\n  spawnCurrentUser()\n  return send(NAME, SNAPSHOT, null, {expectReply: true, timeout: 0})\n}\n\nasync function info() {\n  spawnCurrentUser()\n  const {addr} = await snapshot()\n  if (addr == null) throw new Error(\"No Flow Address for Current User\")\n  return account(addr)\n}\n\nconst makeSignable = msg => {\n  invariant(/^[0-9a-f]+$/i.test(msg), \"Message must be a hex string\")\n\n  return {\n    message: msg,\n  }\n}\n\nasync function signUserMessage(msg) {\n  spawnCurrentUser()\n  const user = await authenticate()\n  const signingService = serviceOfType(user.services, \"user-signature\")\n\n  invariant(\n    signingService,\n    \"Current user must have authorized a signing service.\"\n  )\n\n  try {\n    const response = await execService({\n      service: signingService,\n      msg: makeSignable(msg),\n    })\n    if (Array.isArray(response)) {\n      return response.map(compSigs => normalizeCompositeSignature(compSigs))\n    } else {\n      return [normalizeCompositeSignature(response)]\n    }\n  } catch (error) {\n    return error\n  }\n}\n\n// Deprecated\nasync function verifyUserSignatures(msg, compSigs) {\n  console.warn(\n    `\n    %cFCL/SDK Deprecation Notice\n    ============================\n    verifyUserSignatures is no longer exported as fcl.currentUser().verifyUserSignatures\n    and is now available as fcl.verifyUserSignatures\n    ============================\n    `,\n    \"font-weight:bold;font-family:monospace;\"\n  )\n  return verify(msg, compSigs)\n}\n\nlet currentUser = () => {\n  return {\n    authenticate,\n    unauthenticate,\n    authorization,\n    signUserMessage,\n    verifyUserSignatures,\n    subscribe,\n    snapshot\n  }\n}\n\ncurrentUser.authenticate = authenticate\ncurrentUser.unauthenticate = unauthenticate\ncurrentUser.authorization = authorization\ncurrentUser.signUserMessage = signUserMessage\ncurrentUser.verifyUserSignatures = verifyUserSignatures\ncurrentUser.subscribe = subscribe\ncurrentUser.snapshot = snapshot\n\nexport {currentUser}","export async function fetchServices(servicesURL, code) {\n  if (servicesURL == null || code == null) return []\n\n  const url = new URL(servicesURL)\n  url.searchParams.append(\"code\", code)\n\n  const resp = await fetch(url, {\n    method: \"GET\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n  }).then(d => d.json())\n\n  if (Array.isArray(resp)) return resp\n\n  // Backwards compatibility for First-Gen Wallet Providers\n  const services = []\n\n  // Convert authorizations into authz services\n  if (Array.isArray(resp.authorizations)) {\n    for (let service of resp.authorizations) {\n      services.push({\n        type: \"authz\",\n        keyId: resp.keyId,\n        ...service,\n      })\n    }\n  }\n\n  // Convert Provider info into an authn service\n  if (resp.provider != null) {\n    services.push({\n      type: \"authn\",\n      id: \"wallet-provider#authn\",\n      ...resp.provider,\n    })\n  }\n\n  return services\n}\n","import {withPrefix} from \"@onflow/util-address\"\n\nexport function mergeServices(sx1 = [], sx2 = []) {\n  // TODO: Make this smarter\n  return [...sx1, ...sx2]\n}\n","import \"../default-config\"\nimport {\n  spawn,\n  send,\n  subscriber,\n  snapshoter,\n  UPDATED,\n  SNAPSHOT,\n  INIT,\n  SUBSCRIBE,\n  UNSUBSCRIBE,\n} from \"@onflow/util-actor\"\nimport {send as fclSend, decode, getTransactionStatus} from \"@onflow/sdk\"\n\nconst RATE = 2500\nconst POLL = \"POLL\"\n\nconst fetchTxStatus = async transactionId => {\n  return fclSend([getTransactionStatus(transactionId)]).then(decode)\n}\n\nconst isExpired = tx => tx.status === 5\nconst isSealed = tx => tx.status >= 4\nconst isExecuted = tx => tx.status >= 3\nconst isFinalized = tx => tx.status >= 2\nconst isPending = tx => tx.status >= 1\nconst isUnknown = tx => tx.status >= 0\n\nconst isDiff = (cur, next) => {\n  return JSON.stringify(cur) !== JSON.stringify(next)\n}\n\nconst HANDLERS = {\n  [INIT]: async ctx => {\n    const tx = await fetchTxStatus(ctx.self())\n    if (!isSealed(tx)) setTimeout(() => ctx.sendSelf(POLL), RATE)\n    ctx.merge(tx)\n  },\n  [SUBSCRIBE]: (ctx, letter) => {\n    ctx.subscribe(letter.from)\n    ctx.send(letter.from, UPDATED, ctx.all())\n  },\n  [UNSUBSCRIBE]: (ctx, letter) => {\n    ctx.unsubscribe(letter.from)\n  },\n  [SNAPSHOT]: async (ctx, letter) => {\n    letter.reply(ctx.all())\n  },\n  [POLL]: async ctx => {\n    const tx = await fetchTxStatus(ctx.self())\n    if (!isSealed(tx)) setTimeout(() => ctx.sendSelf(POLL), RATE)\n    if (isDiff(ctx.all(), tx)) ctx.broadcast(UPDATED, tx)\n    ctx.merge(tx)\n  },\n}\n\nconst scoped = transactionId => {\n  if (typeof transactionId === \"object\")\n    transactionId = transactionId.transactionId\n  if (transactionId == null) throw new Error(\"transactionId required\")\n  return transactionId\n}\n\nconst spawnTransaction = transactionId => {\n  return spawn(HANDLERS, scoped(transactionId))\n}\n\nexport function transaction(transactionId) {\n  function snapshot() {\n    return snapshoter(transactionId, spawnTransaction)\n  }\n\n  function subscribe(callback) {\n    return subscriber(scoped(transactionId), spawnTransaction, callback)\n  }\n\n  function once(predicate) {\n    return function innerOnce(opts = {}) {\n      const suppress = opts.suppress || false\n      return new Promise((resolve, reject) => {\n        const unsub = subscribe(txStatus => {\n          if (txStatus.statusCode && !suppress) {\n            reject(txStatus.errorMessage)\n            unsub()\n          } else if (predicate(txStatus)) {\n            resolve(txStatus)\n            unsub()\n          }\n        })\n      })\n    }\n  }\n\n  return {\n    snapshot,\n    subscribe,\n    onceFinalized: once(isFinalized),\n    onceExecuted: once(isExecuted),\n    onceSealed: once(isSealed),\n  }\n}\n\ntransaction.isUnknown = isUnknown\ntransaction.isPending = isPending\ntransaction.isFinalized = isFinalized\ntransaction.isExecuted = isExecuted\ntransaction.isSealed = isSealed\ntransaction.isExpired = isExpired\n","import {invariant} from \"@onflow/util-invariant\"\nimport * as sdk from \"@onflow/sdk\"\nimport {isRequired, isObject, isString, isFunc, isNumber} from \"./utils/is\"\nimport {normalizeArgs} from \"./utils/normalize-args\"\nimport {currentUser} from \"../current-user\"\nimport {transaction} from \"../transaction\"\n\n/** As the current user Mutate the Flow Blockchain\n *\n *  @arg {Object} opts - Mutation Options and configuration\n *  @arg {string} opts.cadence - Cadence Transaction used to mutate Flow\n *  @arg {ArgsFn} opts.args - Arguments passed to cadence transaction\n *  @arg {number} opts.limit - Compute Limit for transaction\n *  @returns {string} Transaction Id\n *\n *  Where:\n *    @callback ArgsFn\n *    @arg {ArgFn}  arg - Argument function to define a single argument\n *    @arg {Object} t   - Cadence Types object used to define the type\n *    @returns {args[]}\n *\n *    @callback ArgFn\n *    @arg {Any}  value - the value of the argument\n *    @arg {Type} type  - the cadence type of the value\n *    @returns {arg}\n *\n *  Example:\n *    fcl.mutate({\n *      cadence: `\n *        transaction(a: Int, b: Int, c: Address) {\n *          prepare(acct: AuthAccount) {\n *            log(acct)\n *            log(a)\n *            log(b)\n *            log(c)\n *          }\n *        }\n *      `,\n *      args: (arg, t) => [\n *        arg(6, t.Int),\n *        arg(7, t.Int),\n *        arg(\"0xba1132bc08f82fe2\", t.Address),\n *      ],\n *    })\n *\n *\n *  Options:\n *    type Options = {\n *      cadence: String!,\n *      args: (arg, t) => Array<Arg>,\n *      limit: Number,\n *      authz: AuthzFn, // will overload the trinity of signatory roles\n *      proposer: AuthzFn, // will overload the proposer signatory role\n *      payer: AuthzFn, // will overload the payer signatory role\n *      authorizations: [AuthzFn], // an array of authorization functions used as authorizations signatory roles\n *    }\n */\n\nconst noop = () => {}\n\nexport async function mutate(opts = {}) {\n  var txid\n  try {\n    await prepMutation(opts)\n\n    // Allow for a config to overwrite the authorization function.\n    // prettier-ignore\n    const authz = await sdk.config().get(\"fcl.authz\", currentUser().authorization)\n\n    // prettier-ignore\n    txid = sdk.send([\n      sdk.transaction(opts.cadence),\n\n      sdk.args(normalizeArgs(opts.args || [])),\n\n      opts.limit && isNumber(opts.limit) && sdk.limit(opts.limit),\n\n      // opts.proposer > opts.authz > authz\n      sdk.proposer(opts.proposer || opts.authz || authz),\n\n      // opts.payer > opts.authz > authz\n      sdk.payer(opts.payer || opts.authz || authz),\n\n      // opts.authorizations > [opts.authz > authz]\n      sdk.authorizations(opts.authorizations || [opts.authz || authz]),\n    ]).then(sdk.decode)\n\n    return txid\n  } catch (error) {\n    throw error\n  }\n}\n\nasync function prepMutation(opts) {\n  // prettier-ignore\n  invariant(isRequired(opts), \"mutate(opts) -- opts is required\")\n  // prettier-ignore\n  invariant(isObject(opts), \"mutate(opts) -- opts must be an object\")\n  // prettier-ignore\n  invariant(isRequired(opts.cadence), \"mutate({ cadence }) -- cadence is required\")\n  // prettier-ignore\n  invariant(isString(opts.cadence), \"mutate({ cadence }) -- cadence must be a string\")\n  // prettier-ignore\n  invariant(\n    await sdk.config.get(\"accessNode.api\"),\n    `Required value for \"accessNode.api\" not defined in config. See: ${\"https://github.com/onflow/flow-js-sdk/blob/master/packages/fcl/src/exec/query.md#configuration\"}`\n  )\n}\n","import {interaction, pipe} from \"@onflow/sdk\"\nimport {resolve as defaultResolve} from \"@onflow/sdk\"\nimport {config, createSignableVoucher} from \"@onflow/sdk\"\n\nexport const serialize = async (args = [], opts = {}) => {\n  const resolveFunction = await config.first(\n    [\"sdk.resolve\"],\n    opts.resolve || defaultResolve\n  )\n\n  if (Array.isArray(args)) args = await pipe(interaction(), args)\n\n  return JSON.stringify(\n    createSignableVoucher(await resolveFunction(args)),\n    null,\n    2\n  )\n}\n","import {spawn, subscriber, SUBSCRIBE, UNSUBSCRIBE} from \"@onflow/util-actor\"\nimport {config, latestBlock} from \"@onflow/sdk\"\nexport {getEvents} from \"@onflow/sdk\"\nimport {send} from \"@onflow/sdk\"\nimport {decode} from \"@onflow/sdk\"\n\nconst RATE = 10000\nconst UPDATED = \"UPDATED\"\nconst TICK = \"TICK\"\n\nconst scheduleTick = async ctx => {\n  return setTimeout(\n    () => ctx.sendSelf(TICK),\n    await config().get(\"fcl.eventPollRate\", RATE)\n  )\n}\n\nconst HANDLERS = {\n  [TICK]: async ctx => {\n    if (!ctx.hasSubs()) return\n    let hwm = ctx.get(\"hwm\")\n    if (hwm == null) {\n      ctx.put(\"hwm\", await latestBlock())\n      ctx.put(\"tick\", await scheduleTick(ctx))\n    } else {\n      let next = await latestBlock()\n      ctx.put(\"hwm\", next)\n      const data = await send([\n        getEvents(ctx.self(), hwm.height, next.height - 1),\n      ]).then(decode)\n      for (let d of data) ctx.broadcast(UPDATED, d.data)\n      ctx.put(\"tick\", await scheduleTick(ctx))\n    }\n  },\n  [SUBSCRIBE]: async (ctx, letter) => {\n    if (!ctx.hasSubs()) {\n      ctx.put(\"tick\", await scheduleTick(ctx))\n    }\n    ctx.subscribe(letter.from)\n  },\n  [UNSUBSCRIBE]: (ctx, letter) => {\n    ctx.unsubscribe(letter.from)\n    if (!ctx.hasSubs()) {\n      clearTimeout(ctx.get(\"tick\"))\n      ctx.delete(\"tick\")\n      ctx.delete(\"hwm\")\n    }\n  },\n}\n\nconst spawnEvents = key => spawn(HANDLERS, key)\n\nexport function events(key) {\n  return {\n    subscribe: callback => subscriber(key, spawnEvents, callback),\n  }\n}\n","export const sendMsgToFCL = (type, msg = {}) => {\n  if (window.location !== window.parent.location) {\n    window.parent.postMessage({...msg, type}, \"*\")\n  } else {\n    window.opener.postMessage({...msg, type}, \"*\")\n  }\n}\n\nexport const close = () => {\n  sendMsgToFCL(\"FCL:VIEW:CLOSE\")\n}\n\nexport const approve = data => {\n  sendMsgToFCL(\"FCL:VIEW:RESPONSE\", {\n    f_type: \"PollingResponse\",\n    f_vsn: \"1.0.0\",\n    status: \"APPROVED\",\n    reason: null,\n    data: data,\n  })\n}\n\nexport const decline = reason => {\n  sendMsgToFCL(\"FCL:VIEW:RESPONSE\", {\n    f_type: \"PollingResponse\",\n    f_vsn: \"1.0.0\",\n    status: \"DECLINED\",\n    reason: reason,\n    data: null,\n  })\n}\n","export const onMessageFromFCL = (messageType, cb = () => {}) => {\n  const buildData = data => {\n    if (data.deprecated)\n      console.warn(\"DEPRECATION NOTICE\", data.deprecated.message)\n    delete data?.body?.interaction\n\n    return data\n  }\n\n  const internal = e => {\n    const {data} = e\n    if (typeof data !== \"object\") return\n    if (typeof data == null) return\n    if (data.type !== messageType) return\n\n    cb(buildData(data))\n  }\n\n  window.addEventListener(\"message\", internal)\n  return () => window.removeEventListener(\"message\", internal)\n}\n","import {withPrefix} from \"@onflow/util-address\"\nimport {COMPOSITE_SIGNATURE_PRAGMA} from \"../current-user/normalize/__vsn\"\n\nexport function CompositeSignature(addr, keyId, signature) {\n  this.f_type = COMPOSITE_SIGNATURE_PRAGMA.f_type\n  this.f_vsn = COMPOSITE_SIGNATURE_PRAGMA.f_vsn\n  this.addr = withPrefix(addr)\n  this.keyId = Number(keyId)\n  this.signature = signature\n}\n","import \"./default-config\"\nexport {VERSION} from \"./VERSION\"\nexport {query} from \"./exec/query\"\nexport {mutate} from \"./exec/mutate\"\nexport {verifyUserSignatures} from \"./exec/verify\"\nexport {serialize} from \"./serialize\"\nexport {transaction as tx} from \"./transaction\"\nexport {events} from \"./events\"\n\nimport {currentUser} from \"./current-user\"\nexport {currentUser}\n\nexport const authenticate = () => currentUser().authenticate()\nexport const unauthenticate = () => currentUser().unauthenticate()\nexport const reauthenticate = () => {\n  currentUser().unauthenticate()\n  return currentUser().authenticate()\n}\nexport const signUp = () => currentUser().authenticate()\nexport const logIn = () => currentUser().authenticate()\n\nexport const authz = currentUser().authorization\n\nimport * as types from \"@onflow/types\"\nexport const t = types\n\nimport * as WalletUtils from \"./wallet-utils\"\nexport {WalletUtils}\n\nexport {TestUtils} from \"@onflow/sdk\"\nexport {config} from \"@onflow/sdk\"\nexport {send} from \"@onflow/sdk\"\nexport {decode} from \"@onflow/sdk\"\nexport {account} from \"@onflow/sdk\"\nexport {latestBlock} from \"@onflow/sdk\"\nexport {isOk, isBad, why, pipe, build} from \"@onflow/sdk\"\nexport {withPrefix, sansPrefix, display} from \"@onflow/util-address\"\nexport {template as cadence} from \"@onflow/util-template\"\nexport {template as cdc} from \"@onflow/util-template\"\nexport {createSignableVoucher} from \"@onflow/sdk\"\n\n// builders\nexport {transaction} from \"@onflow/sdk\"\nexport {script} from \"@onflow/sdk\"\nexport {ping} from \"@onflow/sdk\"\nexport {atBlockHeight} from \"@onflow/sdk\"\nexport {atBlockId} from \"@onflow/sdk\"\nexport {getAccount} from \"@onflow/sdk\"\nexport {getEvents} from \"@onflow/sdk\"\nexport {getEventsAtBlockHeightRange} from \"@onflow/sdk\"\nexport {getEventsAtBlockIds} from \"@onflow/sdk\"\nexport {getLatestBlock} from \"@onflow/sdk\"\nexport {getBlock} from \"@onflow/sdk\"\nexport {getBlockHeader} from \"@onflow/sdk\"\nexport {getBlockById} from \"@onflow/sdk\"\nexport {getBlockByHeight} from \"@onflow/sdk\"\nexport {getCollection} from \"@onflow/sdk\"\nexport {getTransactionStatus} from \"@onflow/sdk\"\nexport {getTransaction} from \"@onflow/sdk\"\nexport {authorizations, authorization} from \"@onflow/sdk\"\nexport {args, arg} from \"@onflow/sdk\"\nexport {proposer} from \"@onflow/sdk\"\nexport {payer} from \"@onflow/sdk\"\nexport {limit} from \"@onflow/sdk\"\nexport {ref} from \"@onflow/sdk\"\nexport {params, param} from \"@onflow/sdk\"\nexport {validator} from \"@onflow/sdk\"\nexport {invariant} from \"@onflow/sdk\"\n"]},"metadata":{},"sourceType":"module"}